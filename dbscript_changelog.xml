<?xml version="1.0" encoding="utf-8" ?>
<SELECTION xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="file:///C:/Program Files (x86)/Common Files/gorep/selection/select.xsd"
           NAME="script for changelog database"  DBID="CHANGELOG" DBSIMPLEID="CHANGELOG" KEY="CHANGELOG_001" OWNER="application." DBVERSION="1" VERSION="1" SAFE="1">
   <DATABASENAMES>
      <NAME ID="APP" NAME="application." />
      <NAME ID="CODE" NAME="code." />
      <NAME ID="SYSTEM" NAME="system." />
      <NAME ID="DOCUMENTATION" NAME="documentation." />
   </DATABASENAMES>
   <!-- 
get "alias" parameter that holds login id
get ip , ip is enabled calling 
   -->
   <SCRIPTS>
      <SCRIPT ID="idLogin" VERSION="0" DBVERSION="1" TYPE="login" LANGUAGE="LUA">
         <CODE>
            <![CDATA[
function main()
   local app = Application.new()
   local result = Result.new()
   local alias = result:GetParam("alias", "guest") -- default alias is guest
   local ip = result:GetParam("ip", "") 

   local batch = SqlBatch.new()
   batch:AddStatement("select_user","SELECT UserK FROM $OTUser WHERE FLoginName={=name}","select" )
   batch:SetValue("name",alias)
   local iUserKey = batch:Execute("select_user")
   if type(iUserKey) == "number" then
      batch:SetValue("user",iUserKey)
      batch:AddStatement("update_count","UPDATE $OTUser SET FLoginCount = ISNULL(FLoginCount,0) + 1 WHERE UserK={=user}","update" )
      batch:Execute("update_count")
      if string.len( ip ) > 0 then
         batch:SetValue("ip",ip)
         batch:AddStatement("add_ip","INSERT INTO $OTUserHistory (UserK,FValue,FFind) VALUES({=user},{=ip},'ip')","insert" )
         batch:Execute("add_ip")
      end
   else return; end

   if alias == "guest" then
      batch:AddStatement("select_count","SELECT FLoginCount FROM $OTUser WHERE UserK={=user}","select" )
      local iCount = batch:Execute("select_count")
      alias = alias .. iCount
      result:SetValue("alias", alias)
   end

   local user = app:GetUser( result:GetParam("user", ""), true )
   if user == nil then
      user = app:AddUser()
      user:SetName( alias )
      user:LoadQueries()
      user:SetVariable( "@@user", iUserKey );
      user:SetVariable( "@@global", 1 );
      user:SetVariable( "@@ip", ip );
   elseif user:GetVariable( "@@global", false ) == "" then
      user:SetVariable( "@@user", iUserKey );
      user:SetVariable( "@@global", 1 );
   end
end
main()
         ]]>
         </CODE>
      </SCRIPT>
      <SCRIPT ID="idUserFields" VERSION="0" DBVERSION="1" TYPE="afterreadscript" LANGUAGE="LUA">
         <CODE>
   <![CDATA[
-- select all fields connected to tables in changelog
      ]]>
         </CODE>
      </SCRIPT>
   </SCRIPTS>

   <INTELLISENSES>
      <INTELLISENSE ID="system_name" TABLE="TSystem1" SQL="SELECT TOP 20 _s.FName FROM $OTSystem _s WHERE _s.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="System name" />

      <INTELLISENSE ID="hashtag_name" TABLE="TActivity1" SQL="SELECT TOP 20 FName FROM $OTBadge WHERE FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="Hashtag name" />
      <INTELLISENSE ID="hashtag_name_activity" TABLE="TActivity1" SQL="SELECT DISTINCT TOP 20 b.FName FROM $OTBadge b JOIN $OTrXBadge x ON b.BadgeK=x.BadgeK AND x.table_number = 1110 WHERE b.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="Hashtag name" />
      <INTELLISENSE ID="hashtag_name_article" TABLE="TArticle1" SQL="SELECT DISTINCT TOP 20 b.FName FROM $OTBadge b JOIN $OTrXBadge x ON b.BadgeK=x.BadgeK AND x.table_number = 1160 WHERE b.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="Hashtag name" />
      <INTELLISENSE ID="hashtag_name_book" TABLE="TArticleBook1" SQL="SELECT DISTINCT TOP 20 b.FName FROM $OTBadge b JOIN $OTrXBadge x ON b.BadgeK=x.BadgeK AND x.table_number = 1170 WHERE b.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="Hashtag name" />
      <INTELLISENSE ID="hashtag_name_customer" TABLE="TCustomer1" SQL="SELECT DISTINCT TOP 20 b.FName FROM $OTBadge b JOIN $OTrXBadge x ON b.BadgeK=x.BadgeK AND x.table_number = 1030 WHERE b.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="Hashtag name" />
      <INTELLISENSE ID="hashtag_name_project" TABLE="TSale1" SQL="SELECT DISTINCT TOP 20 b.FName FROM $OTBadge b JOIN $OTrXBadge x ON b.BadgeK=x.BadgeK AND x.table_number = 1050 WHERE b.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="Hashtag name" />
      <INTELLISENSE ID="hashtag_name_sale" TABLE="TSale1" SQL="SELECT DISTINCT TOP 20 b.FName FROM $OTBadge b JOIN $OTrXBadge x ON b.BadgeK=x.BadgeK AND x.table_number = 1060 WHERE b.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="Hashtag name" />
      <INTELLISENSE ID="hashtag_name_system" TABLE="TSystem1" SQL="SELECT DISTINCT TOP 20 b.FName FROM $OTBadge b JOIN $OTrXBadge x ON b.BadgeK=x.BadgeK AND x.table_number = 1010 WHERE b.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="Hashtag name" />
      <INTELLISENSE ID="hashtag_name_systemrequest" TABLE="TSystemRequest1" SQL="SELECT DISTINCT TOP 20 b.FName FROM $OTBadge b JOIN $OTrXBadge x ON b.BadgeK=x.BadgeK AND x.table_number = 1150 WHERE b.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="Hashtag name" />

      <INTELLISENSE ID="system_name_key" TABLE="TSystem1" SQL="SELECT TOP 20 _s.FName + ',' + CAST(_s.SystemK AS NVARCHAR(20)) FROM $OTSystem _s WHERE _s.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="system name" />

      <INTELLISENSE ID="customer_name_key" TABLE="TCustomer1" SQL="SELECT TOP 20 _c.FName + ',' + CAST(_c.CustomerK AS NVARCHAR(20)) FROM $OTCustomer _c WHERE _c.FName like '{{=this}}%' AND FDeleted = 0 ORDER BY 1" MASK="V" DESCRIPTION="customer name" />
      <INTELLISENSE ID="customer_thread_name" TABLE="TCustomer1" SQL="SELECT TOP 20 _c.FName + ',' + CAST(_c.CustomerK AS NVARCHAR(20)) FROM $OTCustomer _c WHERE _s.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="system name" />
      <INTELLISENSE ID="system_thread_name" TABLE="TSystem1" SQL="SELECT TOP 20 _s.FName FROM $OTSystem _s JOIN $Othread_header _th ON _s.SystemK = _th.FThreadId AND _th.&quot;Table&quot;=1010 WHERE _s.FName like '{{=this}}%' ORDER BY 1" MASK="V" DESCRIPTION="Thread name" />
      <INTELLISENSE ID="system_key" TABLE="TSystem1" SQL="SELECT TOP 20 _s.SystemK _s.FName FROM $OTSystem _s WHERE _s.FName like '{{=this}}%' ORDER BY 2" MASK="KV" DESCRIPTION="Get system" />
      <INTELLISENSE ID="saleservice_activityname" TABLE="TActivity1" MASK="V" DESCRIPTION="Find acitivy">
DECLARE @iTop INT = 20
DECLARE @iSaleService BIGINT = {=key}
IF @iSaleService IS NULL
   SELECT TOP (@iTop) LEFT( _a.FDescription, 25 ) + ',' + CAST(_a.ActivityK AS NVARCHAR(20) ) FROM $OTActivity _a WHERE _a.FDeleted = 0 AND _a.FDescription like '{{=this}}%'
ELSE
BEGIN
   -- Select activities related to systems that customer is connected to
   -- Find customer key using Sale
   -- Find activities using customer related systems and activities for those systems
   SELECT TOP (@iTop) LEFT( _a.FDescription, 10 ) + ',' + CAST(_a.ActivityK AS NVARCHAR(20) ) FROM $OTActivity _a WHERE _a.FDeleted = 0 AND _a.FDescription like '{{=this}}%'
   AND SELECT FROM $OTActivity a
END
      </INTELLISENSE>
   </INTELLISENSES>
   <FORMATS>
      <FORMAT ID="duration_activity">
         <FORMULA ID="duration_second" SQL="1" NAME="~second Sekunder">DATEDIFF( SECOND, $T.FStartD, $T.FEndD )</FORMULA>
         <FORMULA ID="duration_minute" SQL="1" NAME="~minute Minuter">DATEDIFF( MINUTE, $T.FStartD, $T.FEndD )</FORMULA>
         <FORMULA ID="duration_day" SQL="1" NAME="~days Dagar">DATEDIFF( DAY, $T.FStartD, $T.FEndD )</FORMULA>
         <FORMULA ID="duration_week" SQL="1" NAME="~weeks Veckor">DATEDIFF( DAY, $T.FStartD, $T.FEndD )</FORMULA>
         <FORMULA ID="duration_month" SQL="1" NAME="~months MÃ¥nader">DATEDIFF( MONTH, $T.FStartD, $T.FEndD )</FORMULA>
      </FORMAT>
   </FORMATS>

   <CACHE ID="_no_code">
      <PAIR KEY="0" VALUE="~NoCode _ no value _" />
   </CACHE>

   <CACHE ID="yes_no">
      <PAIR KEY="0" VALUE="NO" />
      <PAIR KEY="1" VALUE="YES" />
   </CACHE>

<!-- activity codes -->
   <CACHE ID="activity.type" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activity.priority" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activity.state" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activity.area" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activity.service" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activity.form" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activity.type.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activity.priority.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activity.state.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activity.area.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activity.service.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activity.form.edit" ADD="_no_code" COMPLETE="0" />

<!-- activity codes -->
   <CACHE ID="activityremark.type" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="activityremark.type.edit" ADD="_no_code" COMPLETE="0" />
   
<!-- article codes -->   
   <CACHE ID="article.level.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="article.type.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="article.state.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="article.target.edit" ADD="_no_code" COMPLETE="0" />
   
   <CACHE ID="articlebooklist.type.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="articlebooklist.state.edit" ADD="_no_code" COMPLETE="0" />
   
   <CACHE ID="articlebook.type.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="articlebook.state.edit" ADD="_no_code" COMPLETE="0" />
   
   <CACHE ID="articlechapter.type.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="articlechapter.state.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="articlechapter.language.edit" ADD="_no_code" COMPLETE="0" />
   
   <CACHE ID="articlepresentation.type.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="articlepresentation.state.edit" ADD="_no_code" COMPLETE="0" />


<!-- sytem codes -->
   <CACHE ID="system.type" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="system.type.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="system.state" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="system.state.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="system.priority" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="system.priority.edit" ADD="_no_code" COMPLETE="0" />
   
<!-- sytem intent -->   
   <CACHE ID="systemintent.type.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="systemintent.state.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="systemintent.difficulty.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="systemintent.priority.edit" ADD="_no_code" COMPLETE="0" />


<!-- sytem request codes -->
   <CACHE ID="systemrequest.type" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="systemrequest.type.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="systemrequest.state" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="systemrequest.state.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="systemrequest.difficulty" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="systemrequest.difficulty.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="systemrequest.priority" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="systemrequest.priority.edit" ADD="_no_code" COMPLETE="0" />

<!-- project codes -->
   <CACHE ID="project.type" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="project.state" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="project.type.edit" ADD="_no_code" COMPLETE="0" />
   <CACHE ID="project.state.edit" ADD="_no_code" COMPLETE="0" />

   <CACHE ID="timespan">
      <PAIR ID="d01" KEY="(DATEDIFF(day ,GETDATE(),$T.$F)=0)" VALUE="Today" />
      <PAIR ID="d02" KEY="(DATEDIFF(week ,GETDATE(),$T.$F)=0)" VALUE="This week" />
      <PAIR ID="d03" KEY="(DATEDIFF(month ,GETDATE(),$T.$F)=0)" VALUE="This Month" />
      <PAIR ID="d04" KEY="(DATEDIFF(quarter ,GETDATE(),$T.$F)=0)" VALUE="This Quarter" />
      <PAIR ID="d05" KEY="(DATEDIFF(year ,GETDATE(),$T.$F)=0)" VALUE="This year" />

      <PAIR ID="d01-1" KEY="(DATEDIFF(day ,GETDATE(),$T.$F)=-1)" VALUE="Yesterday" />
      <PAIR ID="d02-1" KEY="(DATEDIFF(week ,GETDATE(),$T.$F)=-1)" VALUE="Previous week" />
      <PAIR ID="d03-1" KEY="(DATEDIFF(month ,GETDATE(),$T.$F)=-1)" VALUE="Previous Month" />
      <PAIR ID="d04-1" KEY="(DATEDIFF(quarter ,GETDATE(),$T.$F)=-1)" VALUE="Previous Quarter" />
      <PAIR ID="d05-1" KEY="(DATEDIFF(year ,GETDATE(),$T.$F)=-1)" VALUE="Previous year" />

      <PAIR ID="d01+1" KEY="(DATEDIFF(day ,GETDATE(),$T.$F)=1)" VALUE="Tomorrow" />
      <PAIR ID="d02+1" KEY="(DATEDIFF(week ,GETDATE(),$T.$F)=1)" VALUE="Next week" />
      <PAIR ID="d03+1" KEY="(DATEDIFF(month ,GETDATE(),$T.$F)=1)" VALUE="Next Month" />
      <PAIR ID="d04+1" KEY="(DATEDIFF(quarter ,GETDATE(),$T.$F)=1)" VALUE="Next Quarter" />
      <PAIR ID="d05+1" KEY="(DATEDIFF(year ,GETDATE(),$T.$F)=1)" VALUE="Next year" />

      <PAIR ID="d01+01" KEY="(DATEDIFF(day ,GETDATE(),$T.$F) IN(0,1))" VALUE="Today and tomorrow" />
      <PAIR ID="d02+01" KEY="(DATEDIFF(week ,GETDATE(),$T.$F) IN(0,1))" VALUE="This and next week" />
      <PAIR ID="d02+01" KEY="(DATEDIFF(month ,GETDATE(),$T.$F) IN(0,1))" VALUE="This and next month" />
   </CACHE>


   <CONDITIONGROUP ID="activity.conditions">
      <FIELDCONDITION ID="FDone" NAME="_a.FDone" SIMPLENAME="~FDone Completed" TYPE="BOOLEAN">
         <LOOKUP CACHE="yes_no"/>
      </FIELDCONDITION>
      <FIELDCONDITION ID="TypeCType" NAME="_a.TypeC" SIMPLENAME="~TypeCType Type category" TYPE="I4">
         <EXPRESSION>(SELECT _c.type FROM $O{CODE}TCode _c WHERE _c.CodeK=$F)</EXPRESSION>
         <LOOKUP CACHE="code.type">SELECT "number", description FROM $O{CODE}"type" WHERE "group" = 3020 ORDER BY 2</LOOKUP>
      </FIELDCONDITION>
   </CONDITIONGROUP>
   
   <CONDITIONGROUP ID="article.conditions">
      <FIELDCONDITION ID="FSticky" NAME="_a.FSticky" SIMPLENAME="~FSticky Sticky" TYPE="BOOLEAN">
         <LOOKUP CACHE="yes_no"/>
      </FIELDCONDITION>
      <FIELDCONDITION ID="FExtra" NAME="_a.FExtra" SIMPLENAME="~FExtra Extra" TYPE="BOOLEAN">
         <LOOKUP CACHE="yes_no"/>
      </FIELDCONDITION>
   </CONDITIONGROUP>
   
   
   <CONDITIONGROUP ID="sale.conditions">
      <FIELDCONDITION ID="FDone" NAME="_S.FDone" SIMPLENAME="~FDone Completed" TYPE="BOOLEAN">
         <LOOKUP CACHE="yes_no"/>
      </FIELDCONDITION>
   </CONDITIONGROUP>

   <CONDITIONGROUP ID="todo.conditions">
      <FIELDCONDITION ID="FReady" NAME="_t.FReady" SIMPLENAME="~FReady Ready" TYPE="I4">
         <LOOKUP CACHE="yes_no"/>
      </FIELDCONDITION>
      <FIELDCONDITION ID="FClosed" NAME="_t.FClosed" SIMPLENAME="~FClosed Closed" TYPE="I4">
         <LOOKUP CACHE="yes_no"/>
      </FIELDCONDITION>
   </CONDITIONGROUP>

   <CONDITIONGROUP ID="property.conditions">
      <FIELDCONDITION ID="FName" NAME="_p.PropertyNameK" SIMPLENAME="~property.FName Name" TYPE="I4">
         <LOOKUP CACHE="properties">SELECT PropertyNameK, FName FROM $OTPropertyName ORDER BY 2</LOOKUP>
      </FIELDCONDITION>
   </CONDITIONGROUP>

   <CONDITIONGROUP ID="request.conditions">
      <FIELDCONDITION ID="FDone" NAME="_sr.FDone" SIMPLENAME="~FDone Completed" TYPE="BOOLEAN">
         <LOOKUP CACHE="yes_no"/>
      </FIELDCONDITION>
      <FIELDCONDITION ID="StateC" NAME="_sr.StateC" SIMPLENAME="~state State" TYPE="I4">
         <LOOKUP CACHE="systemrequest.state"/>
      </FIELDCONDITION>
   </CONDITIONGROUP>

   <CONDITIONGROUP ID="project.conditions">
      <FIELDCONDITION ID="TypeC" NAME="_p.TypeC" SIMPLENAME="~project_type Project type" TYPE="I4">
         <LOOKUP CACHE="project.type"/>
      </FIELDCONDITION>
      <FIELDCONDITION ID="FDone" NAME="_p.FDone" SIMPLENAME="~FDone Completed" TYPE="BOOLEAN">
         <LOOKUP CACHE="yes_no"/>
      </FIELDCONDITION>
      <FIELDCONDITION ID="FDeleted" NAME="_p.FDeleted" SIMPLENAME="~FDeleted Deleted" TYPE="BOOLEAN" />
   </CONDITIONGROUP>

   <TABLETEMPLATE ID="application.activityremark">
      <FIELD NAME="ActivityRemarkK" ALIAS="ActivityRemarkK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ActivityK" ALIAS="ActivityK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="UserK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UpdateD" ALIAS="UpdateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TActivityRemarkUpdateD UpdateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="activityremark.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=160 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FRemark" ALIAS="Remark" TYPE="STR" CONDITION="1" DISPLAY="0" />

      <EDIT NAME="ActivityRemarkK" ALIAS="ActivityRemarkK" TYPE="I4" NULL="0" DEFAULT="0" />
      <EDIT NAME="ActivityK" ALIAS="ActivityK" TYPE="I4" NULL="0" DEFAULT="0" />
      <EDIT NAME="UserK" ALIAS="UserK" TYPE="I4" />
      <EDIT NAME="UpdateD" ALIAS="UpdateD" TYPE="DATE" NULL="0" />
      <EDIT NAME="FRemark" ALIAS="Remark" TYPE="STR" MAX="2000" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="activityremark.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=160 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
   </TABLETEMPLATE>


   <TABLETEMPLATE ID="application.activity">
      <TRIGGER POST="U">UPDATE $OTActivity SET UpdateD = GETDATE() WHERE ActivityK=${@[$T]ActivityK}</TRIGGER>
      <FIELD ID="ActivityK-Id" NAME="ActivityK" ALIAS="ID" TYPE="INT" CONDITION="1" />
      <FIELD NAME="SuperK" ALIAS="Super" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="Parent" TYPE="I4" CONDITION="1" />
      <FIELD ID="ParentK-SystemK" NAME="ParentK" ALIAS="System" TYPE="INT" CONDITION="1" FF="v">
         <EXPRESSION>(SELECT _s.FName FROM $OTSystem _s WHERE _s.SystemK=$T.ParentK AND $T.table_number=1010)</EXPRESSION>
      </FIELD>
      <FIELD ID="SystemName" NAME="ParentK" ALIAS="System" TYPE="STR" CONDITION="expression" FF="v">
         <EXPRESSION>(SELECT _s.FName FROM $OTSystem _s WHERE _s.SystemK=$T.ParentK AND $T.table_number=1010)</EXPRESSION>
      </FIELD>
      <FIELD ID="ProjectName" NAME="ParentK" ALIAS="Project name" TYPE="STR" FF="v" CONDITION="expression">
         <EXPRESSION>(SELECT TOP 1 _p.FName FROM $OProject _p JOIN $OTrProjectXActivity _r ON _p.ProjectK=_r.ProjectK WHERE _r.ActivityK=$T.ActivityK)</EXPRESSION>
      </FIELD>
      <FIELD ID="ProjectK" NAME="ParentK" ALIAS="Project name" TYPE="INT" FF="v" CONDITION="expression">
         <EXPRESSION>(SELECT TOP 1 _r.ProjectK FROM $OTrProjectXActivity _r WHERE _r.ActivityK=$T.ActivityK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="User2K" ALIAS="Second user" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.User2K)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TActivityCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TActivityUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="ColorS" ALIAS="ColorS" TYPE="I4" CONDITION="1" />
      <FIELD NAME="AliveS" ALIAS="AliveS" TYPE="I4" CONDITION="1" />
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1" DISPLAY="0">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="activity.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=60 ORDER BY 2</LOOKUP>
      </FIELD>

      <FIELD ID="TypeC-Indent" NAME="TypeC" ALIAS="Indented type" TYPE="STR" DESCRIPTION="Indent activity based on level in activity tree if it belongs to any and the type name, activity will almost allways have a type">
         <FORMULA TYPE="HTML" />
         <EXPRESSION>
            ('&lt;span style="margin-left:' + CAST( ISNULL( (SELECT TOP 1 _t.FDepth FROM $Othread _t WHERE _t.FKey=$T.ActivityK AND _t."table_number" = 1110), 0 ) AS VARCHAR(10)) + 'em;"&gt;' + ISNULL((SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F), '_No type_') + '&lt;/span&gt;')
         </EXPRESSION>
      </FIELD>
      <CONDITION ID="TypeC-Indent" NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="activity.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=60 ORDER BY 2</LOOKUP>
      </CONDITION>

      <FIELD NAME="PriorityC" ALIAS="Priority" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="activity.priority">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=61 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="activity.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=62 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="AreaC" ALIAS="Area" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="activity.area">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=63 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="ServiceC" ALIAS="Service" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="activity.service">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=64 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FormC" ALIAS="Form" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="activity.form">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=65 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="LevelC" ALIAS="Level" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="activity.level">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=66 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="ContextC" ALIAS="Context" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="activity.context">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=67 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="ReportC" ALIAS="Report" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="activity.report">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=68 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" DISPLAY="1" />
      <FIELD ID="Note" NAME="FDescription" ALIAS="Note" TYPE="STR" CONDITION="expression">
         <EXPRESSION>(SELECT TOP 1 _n.FNote FROM $OTNote _n WHERE _n.RecordK=$T.ActivityK AND _n.table_number=1110)</EXPRESSION>
      </FIELD>
      <!-- 
      https://www.mssqltips.com/sqlservertip/5653/convert-sql-server-base64-encoded-text-to-images/ 
      https://blogs.msdn.microsoft.com/sqltips/2008/06/30/converting-from-base64-to-varbinary-and-vice-versa/
      -->
      <FIELD ID="Picture" NAME="FDescription" ALIAS="Picture" TYPE="BIN">
         <EXPRESSION>(SELECT TOP 1 'data:image/png;base64,' + CAST(N'' as xml).value('xs:base64Binary(xs:hexBinary(sql:column("_i.FData")))', 'VARCHAR(max)') FROM $OTImage _i WHERE _i.RecordK=$T.ActivityK AND _i.table_number=1110)</EXPRESSION>
         <EXPRESSION OUTPUT="edit">(SELECT TOP 1 _i.FName FROM $OTImage _i WHERE _i.RecordK=$T.ActivityK AND _i.table_number=1110)</EXPRESSION>
      </FIELD>
      <FIELD NAME="FBeginD" ALIAS="Begin" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FBeginD" SIMPLENAME="~TActivityFBeginD Begin" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD ID="FBeginDFixed" NAME="FBeginD" ALIAS="Begin" TYPE="ODATE">
         <EXPRESSION>CONVERT(CHAR(16), $T.$F, 120)</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION ID="FBeginDFixed" NAME="FBeginD" SIMPLENAME="~TActivityFBeginD Begin" TYPE="ODATE" FIXED="1" NOVALUE="1">
         <LOOKUP CACHE="timespan" />
      </CONDITION>
      <FIELD NAME="FEndD" ALIAS="End" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FEndD" SIMPLENAME="~TActivityFEndD End" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FAlertD" ALIAS="Alert" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FAlertD" SIMPLENAME="~TActivityFAlertD Alert" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FDeadlineD" ALIAS="Deadline" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FDeadlineD" SIMPLENAME="~TActivityFDeadlineD Deadline" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FDoneD" ALIAS="Done" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FDoneD" SIMPLENAME="~TActivityFDoneD Done" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD ID="Hashtag.ActivityK" NAME="ActivityK" ALIAS="Hashtag" TYPE="STR" ALIGN="L" FF="v" CONDITION="expression">
         <EXPRESSION>CAST( STUFF( (SELECT ' ' + _tn.FName FROM $OTTag _t JOIN $OTTagName _tn ON _tn.TagNameK= _t.TagNameK AND _t.table_number=1110 WHERE _t.ParentK=$T.ActivityK ORDER BY 1 FOR XML PATH(''))  ,1,1,'' ) AS NVARCHAR(MAX))</EXPRESSION>
      </FIELD>
      <FIELD NAME="FTimeSpent" ALIAS="TimeSpent" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FTimeEstimated" ALIAS="TimeEstimated" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FTimeActual" ALIAS="TimeActual" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FAmount" ALIAS="Amount" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FSort" ALIAS="Sort" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FDone" ALIAS="Closed" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD ID="VersionName" NAME="ActivityK" ALIAS="Version" TYPE="STR" CONDITION="expression">
         <EXPRESSION>
(SELECT TOP 1 (SELECT TOP 1 s.FName FROM $OTSystem s WHERE s.SystemK=_sv.SystemK) + ', ' + CAST(_sv.FVersion1 AS NVARCHAR(5)) + ':' + CAST(_sv.FVersion2 AS NVARCHAR(5)) + ':' + CAST(_sv.FVersion3 AS NVARCHAR(5))
FROM $OTrSystemVersionXActivity _r JOIN $OTSystemVersion _sv ON _r.SystemVersionK=_sv.SystemVersionK WHERE _r.ActivityK=$T.ActivityK)
         </EXPRESSION>
      </FIELD>

      <FIELD ID="CountRemark" NAME="ActivityK" ALIAS="Remark count" TYPE="I4" CONDITION="expression">
         <EXPRESSION>
(SELECT COUNT(*) FROM $OTActivityRemark _ar WHERE _ar.ActivityK=$T.ActivityK)
         </EXPRESSION>
      </FIELD>
      
      <FIELD ID="ThreadKey" NAME="ActivityK" ALIAS="Thread key" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT _th.FThreadId FROM $Othread_header _th JOIN $Othread _t ON _th.FThreadId = _t.FThreadId AND _th.table_number = 1110 WHERE _t.FKey=$T.ActivityK)</EXPRESSION>
      </FIELD>
      <FIELD ID="IsRoot" NAME="ActivityK" ALIAS="Is root" SIMPLENAME="Is activity root" TYPE="INT" CONDITION="expression" DESCRIPTION="Find root activities">
         <EXPRESSION>(CASE WHEN (SELECT COUNT(*) FROM $Othread_header _th WHERE _th.FThreadId=$T.ActivityK AND _th.table_number = 1110) = 0 THEN 0 ELSE 1 END)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountNodes" NAME="ActivityK" ALIAS="Node count" SIMPLENAME="Activity node count" TYPE="INT" CONDITION="expression" DESCRIPTION="Count number of nodes in thread">
         <EXPRESSION>(SELECT COUNT(*) FROM $Othread _t JOIN $Othread_header _th ON _t.FThreadId = _th.FThreadId WHERE _th.FThreadId=$T.ActivityK AND _th.table_number = 1110)</EXPRESSION>
      </FIELD>
      <FIELD ID="Hashtag" NAME="ActivityK" ALIAS="Hashtag" TYPE="STR" DESCRIPTION="Hastags connected to acitivity">
         <EXPRESSION>
CAST( 
STUFF( 
   (SELECT ',' + _b.FName FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _r.ParentK=$T.ActivityK AND _r.table_number=1110),
   1,1,'' )
   AS NVARCHAR(512)
)
         </EXPRESSION>
      </FIELD>
      <CONDITION ID="Hashtag" NAME="ActivityK" SIMPLENAME="Hashtag" TYPE="STR" NOVALUE="1" INTELLISENSE="hashtag_name">
         <EXPRESSION>
$T.$F $_operator (SELECT _r.ParentK FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _b.FName $_condition AND _r.table_number=1110)
         </EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      
      <EDIT NAME="SuperK" ALIAS="Super" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="Parent" TYPE="I4" />
      <EDIT ID="ParentK-SystemK" NAME="ParentK" ALIAS="System" TYPE="I4" INTELLISENSE="system_name_key" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="UserK" ALIAS="User" TYPE="I4">
         <LOOKUP CACHE="user.edit">SELECT UserK, FDisplayName + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="User2K" ALIAS="Second User" TYPE="I4">
         <LOOKUP CACHE="user.edit">SELECT UserK, FDisplayName + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="ColorS" ALIAS="Color" TYPE="I4" />
      <EDIT NAME="AliveS" ALIAS="Alive" TYPE="I4" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="activity.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=60 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="PriorityC" ALIAS="Priority" TYPE="I4">
         <LOOKUP CACHE="activity.priority.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=61 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="activity.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=62 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="AreaC" ALIAS="Area" TYPE="I4">
         <LOOKUP CACHE="activity.area.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=63 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="ServiceC" ALIAS="Service" TYPE="I4">
         <LOOKUP CACHE="activity.service.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=64 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FormC" ALIAS="Form" TYPE="I4">
         <LOOKUP CACHE="activity.form.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=65 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="LevelC" ALIAS="Level" TYPE="I4">
         <LOOKUP CACHE="activity.level.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=66 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="ContextC" ALIAS="Context" TYPE="I4">
         <LOOKUP CACHE="activity.context.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=67 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="ReportC" ALIAS="Report" TYPE="I4">
         <LOOKUP CACHE="activity.report.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=68 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FBeginD" ALIAS="Begin" TYPE="DATE" />
      <EDIT NAME="FEndD" ALIAS="End" TYPE="DATE" />
      <EDIT NAME="FAlertD" ALIAS="Alert" TYPE="DATE" />
      <EDIT NAME="FDeadlineD" ALIAS="Deadline" TYPE="DATE" />
      <EDIT NAME="FDoneD" ALIAS="Done" TYPE="DATE" />
      <EDIT NAME="FTimeSpent" ALIAS="Time spent" TYPE="R8" />
      <EDIT NAME="FTimeEstimated" ALIAS="Time estimated" TYPE="R8" />
      <EDIT NAME="FTimeActual" ALIAS="Time actual" TYPE="R8" />
      <EDIT NAME="FAmount" ALIAS="Amount" TYPE="R8" />
      <EDIT NAME="FSort" ALIAS="Sort" TYPE="I4" />
      <EDIT NAME="FDone" ALIAS="Closed" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
   </TABLETEMPLATE>

   <TABLETEMPLATE ID="application.address">
      <FIELD NAME="AddressK" ALIAS="AddressK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="ParentK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="CreateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TAddressCreateD CreateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="UpdateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TAddressUpdateD UpdateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="TypeC" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1" />
      <FIELD NAME="CountryC" ALIAS="CountryC" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1" />
      <FIELD NAME="FZip" ALIAS="Zip" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FState" ALIAS="State" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FCity" ALIAS="City" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FCounty" ALIAS="County" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FAddress" ALIAS="Address" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FAddress2" ALIAS="Address2" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FAddress3" ALIAS="Address3" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1" />
   </TABLETEMPLATE>


<!-- Article table, handles text that work like bigger articles or like a blog -->
   <TABLETEMPLATE ID="application.article">
      <FIELD NAME="ArticleBookK" ALIAS="ArticleBookK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="SuperK" ALIAS="Parent article" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT COALESCE(_s.FHeader,_s.FBrief,'') FROM $O{APP}TArticle _s WHERE _s.ArticleK=$T.SuperK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="ParentK" ALIAS="ParentK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TArticleCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TArticleUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="Thread" ALIAS="Thread" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ScopeS" ALIAS="Scope" TYPE="I4" CONDITION="1" />
      <FIELD NAME="LevelC" ALIAS="Level" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="article.level">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=140 ORDER BY 2</LOOKUP>
      </FIELD>
      
      
      <FIELD ID="LevelC-Rank" NAME="LevelC" ALIAS="Level rank" TYPE="I4" CONDITION="expression">
         <EXPRESSION>ISNULL((SELECT _c.Frank FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F),0)</EXPRESSION>
      </FIELD>
      
      
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="article.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=141 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="article.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=142 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="TargetC" ALIAS="Target" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="article.target">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=143 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="ConnectionC" ALIAS="Connection" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="article.connection">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=144 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FBrief" ALIAS="Brief" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD ID="FBrief-Indent" NAME="FBrief" ALIAS="Indented brief" CONDITION="1" TYPE="STR" DESCRIPTION="Indent brief based on level in article tree if it belongs to any">
         <FORMULA TYPE="HTML" />
         <EXPRESSION>
('&lt;span style="margin-left:' + CAST( ISNULL( (SELECT TOP 1 _t.FDepth FROM $Othread _t WHERE _t.FKey=$T.ArticleK AND _t."table_number" = 1160), 0 ) * 2 AS VARCHAR(10)) + 'em;"&gt;' + $T.FBrief + '&lt;/span&gt;')
         </EXPRESSION>
      </FIELD>
      
      <FIELD NAME="FHeader" ALIAS="Header" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FSearchText" ALIAS="Search text" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FChapterName" ALIAS="Chapter" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FText" ALIAS="Text" TYPE="STR" CONDITION="1" />
      <FIELD ID="Picture" NAME="FDescription" ALIAS="Picture" TYPE="BIN">
         <EXPRESSION>(SELECT TOP 1 'data:image/png;base64,' + CAST(N'' as xml).value('xs:base64Binary(xs:hexBinary(sql:column("_i.FData")))', 'VARCHAR(max)') FROM $OTImage _i WHERE _i.RecordK=$T.ArticleK AND _i.table_number=1160)</EXPRESSION>
         <EXPRESSION OUTPUT="edit">(SELECT TOP 1 _i.FName FROM $OTImage _i WHERE _i.RecordK=$T.ArticleK AND _i.table_number=1160)</EXPRESSION>
      </FIELD>
      <FIELD NAME="FChapter" ALIAS="Chapter" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FPage" ALIAS="Page" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FValidFrom" ALIAS="Valid from" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      
      <FIELD ID="FChapterName-Chapter" NAME="FChapterName" ALIAS="Chapter" TYPE="STR" CONDITION="expression">
         <EXPRESSION>(SELECT TOP 1 _ac.FName  FROM $OTArticleChapter _ac JOIN $OTrArticleChapterXArticle _x ON _ac.ArticleChapterK=_x.ArticleChapterK WHERE _x.ArticleK = $T.ArticleK)</EXPRESSION>
      </FIELD>
      <CONDITION ID="ArticleK-ArticleChapterK" NAME="FChapterName" ALIAS="ID (Chapter)" TYPE="INT">
         <EXPRESSION>(SELECT TOP 1 _ac.ArticleChapterK  FROM $OTArticleChapter _ac JOIN $OTrArticleChapterXArticle _x ON _ac.ArticleChapterK=_x.ArticleChapterK WHERE _x.ArticleK = $T.ArticleK)</EXPRESSION>
      </CONDITION>
      
      <!--
      | Filter articles based on path found i thread table
      -->
      <CONDITION ID="ChapterThreadPath" NAME="ArticleK" ALIAS="Path" TYPE="INT" NOVALUE="1">
         <EXPRESSION>
    <![CDATA[
$T.ArticleK $_operator (
 SELECT x.ArticleK FROM $OTrArticleChapterXArticle x JOIN $Othread t ON t.FKey = x.ArticleChapterK AND t.table_number = 1340 
 WHERE $T.ArticleK = x.ArticleK AND t.FPath LIKE '%' + (SELECT FPath FROM $Othread WHERE table_number = 1340 AND FKey = $_value)
   AND (SELECT FThreadId FROM $Othread WHERE table_number = 1340 AND FKey = $_value) = (SELECT FThreadId FROM $Othread WHERE table_number = 1340 AND FKey = (SELECT x.ArticleChapterK FROM $OTrArticleChapterXArticle x WHERE x.ArticleK=$T.ArticleK))
 UNION
 SELECT ArticleK FROM $OTrArticleChapterXArticle WHERE ArticleChapterK = $_value
)    ]]></EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      
      <!--
      | Filter article based on path for chapters found i thread table
      -->
      <CONDITION ID="ChapterThread" NAME="ArticleK" ALIAS="Thread" TYPE="INT" NOVALUE="1">
         <EXPRESSION>$T.ArticleK $_operator (SELECT x.ArticleK FROM $OTrArticleChapterXArticle x WHERE x.ArticleChapterK IN (SELECT FKey FROM $Othread WHERE table_number = 1340 AND FThreadId = $_value) )</EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      
      <!--
      | Filter articles based on chapter thread id. Artickles beloing to chapter thread is listed
      -->
      <CONDITION ID="ArticleK-BadgeK" NAME="ArticleK" ALIAS="Hashtag" TYPE="INT" NOVALUE="1">
         <EXPRESSION>(SELECT 1 FROM $OTrXBadge _x WHERE _x.ParentK = $T.ArticleK AND _x.table_number=1160 AND _x.BadgeK $_condition) = 1</EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      

      <!-- 
      <CONDITION ID="ArticleK-BadgeK" NAME="ArticleK" ALIAS="ID (Hashtag)" TYPE="INT">
         <EXPRESSION>(SELECT TOP 1 _x.BadgeK FROM $OTrXBadge _x WHERE _x.ParentK = $T.ArticleK AND _x.table_number=1160)</EXPRESSION>
      </CONDITION>
      -->
      
      <CONDITION ID="ArticleK-BadgeK2" NAME="ArticleK" TYPE="STR" NOVALUE="1">
         <EXPRESSION>
$T.$F $_operator (SELECT _x.ParentK FROM $OTrXBadge _x WHERE _x.BadgeK $_condition AND _x.table_number=1160)
         </EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      
      
      
      <FIELD NAME="FCreate" ALIAS="Created" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FCreate" SIMPLENAME="~TArticleFCreate Created" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FUpdate" ALIAS="Updated" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FUpdate" SIMPLENAME="~TArticleFUpdate Updated" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      
      <CONDITION NAME="FValidFrom" SIMPLENAME="~FValidFrom Valid from" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FValidTo" ALIAS="Valid to" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FValidTo" SIMPLENAME="~FValidTo Valid to" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FSticky" ALIAS="Sticky" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FExtra" ALIAS="Extra" TYPE="BOOLEAN" CONDITION="1" DESCRIPTION="Based on context article is related to, this marks articcle as extra/additional information.">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FDepreciated" ALIAS="Depreciated" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>

      <FIELD ID="VersionName" NAME="ArticleK" ALIAS="Version" TYPE="STR" CONDITION="expression" DESCRIPTION="If article is connected to version, then select the latest version">
         <EXPRESSION>(
SELECT TOP 1 (FORMAT(_sv.FVersion1,'0#') + ':' + FORMAT(_sv.FVersion2,'0#') + ':' + FORMAT(_sv.FVersion3,'00#'))
FROM $OTSystemVersion _sv JOIN $OTrSystemVersionXArticle _r ON _sv.SystemVersionK=_r.SystemVersionK
WHERE _r.ArticleK=$T.ArticleK
ORDER BY _r.UpdateD DESC)
         </EXPRESSION>
      </FIELD>
      <FIELD ID="VersionNameMajor" NAME="ArticleK" ALIAS="Major version" TYPE="STR" CONDITION="expression" ALIGN="R" DESCRIPTION="If article is connected to version, then select the latest major version">
         <EXPRESSION>(
SELECT TOP 1 FORMAT(_sv.FVersion1,'0#')
FROM $OTSystemVersion _sv JOIN $OTrSystemVersionXArticle _r ON _sv.SystemVersionK=_r.SystemVersionK
WHERE _r.ArticleK=$T.ArticleK
ORDER BY _r.UpdateD DESC)
         </EXPRESSION>
      </FIELD>
      
      <FIELD ID="CountLink" NAME="ArticleK" ALIAS="Count link" SIMPLENAME="Number of links" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTLink _l WHERE _l.ParentK=$T.ArticleK AND _l.table_number=1160)</EXPRESSION>
      </FIELD>
      
      <FIELD ID="Hashtag" NAME="ArticleK" ALIAS="Hashtag" TYPE="STR" DESCRIPTION="Hastags connected to acitivity">
         <EXPRESSION>
CAST( 
STUFF( 
   (SELECT ',' + _b.FName FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _r.ParentK=$T.ArticleK AND _r.table_number=1160),
   1,1,'' )
   AS NVARCHAR(512)
)
         </EXPRESSION>
      </FIELD>

      <CONDITION ID="Hashtag" NAME="ArticleK" TYPE="STR" NOVALUE="1">
         <EXPRESSION>
$T.$F $_operator (SELECT _r.ParentK FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _b.FName $_condition AND _r.table_number=1160)
         </EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      
      <EDIT NAME="ArticleBookK" ALIAS="ArticleBookK" TYPE="I4" />
      <EDIT NAME="SuperK" ALIAS="SuperK" TYPE="INT" />
      <EDIT NAME="ParentK" ALIAS="ParentK" TYPE="INT" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="INT" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="Thread" ALIAS="Thread" TYPE="I4" />
      <EDIT NAME="ScopeS" ALIAS="Scope" TYPE="I4" />
      <EDIT NAME="LevelC" ALIAS="Level" TYPE="I4">
         <LOOKUP CACHE="article.level.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=140 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="article.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=141 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="article.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=142 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="TargetC" ALIAS="Target" TYPE="I4">
         <LOOKUP CACHE="article.target.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=143 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="ConnectionC" ALIAS="Connection" TYPE="I4">
         <LOOKUP CACHE="article.connection.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=144 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FBrief" ALIAS="Brief" TYPE="STR" MAX="500" />
      <EDIT NAME="FHeader" ALIAS="Header" TYPE="STR" MAX="500" />
      <EDIT NAME="FSearchText" ALIAS="Search text" TYPE="STR" MAX="200" />
      <EDIT NAME="FChapterName" ALIAS="Chapter" TYPE="STR" MAX="200" />
      <EDIT NAME="FText" ALIAS="Text" TYPE="STR" />
      <EDIT NAME="FChapter" ALIAS="Chapter" TYPE="I4" />
      <EDIT NAME="FPage" ALIAS="Page" TYPE="I4" />
      <EDIT NAME="FCreate" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="FUpdate" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="FSticky" ALIAS="Sticky" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FExtra" ALIAS="Extra" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FDepreciated" ALIAS="Depreciated" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
   </TABLETEMPLATE>
   
   <TABLETEMPLATE ID="application.articlebooklist">
      <FIELD NAME="UserK" ALIAS="UserK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="SuperK" ALIAS="SuperK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="ParentK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _tn.name FROM $Otable_number _tn WHERE _tn.number=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="table_number">SELECT number, name FROM $Otable_number ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="CreateD" ALIAS="CreateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TArticleBookListCreateD CreateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="UpdateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TArticleBookListUpdateD UpdateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>

      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlebooklists.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=290 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlebooklist.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=290 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FSearchName" ALIAS="Search name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FReleased" ALIAS="Released" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FReleased" SIMPLENAME="~TArticleBookListFReleased Released" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FReady" ALIAS="Ready" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FDepreciated" ALIAS="Depreciated" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FCount1" ALIAS="Count" TYPE="INT" CONDITION="1" />
      <FIELD NAME="FCount2" ALIAS="Count2" TYPE="INT" CONDITION="1" />
      
      <CONDITION ID="ArticleBookK" NAME="ArticleBookListK" SIMPLENAME="ID (Book)" TYPE="INT" DESCRIPTION="Condition to compare to books">
         <EXPRESSION>(SELECT x.ArticleBookK FROM $OTrArticleBookXArticleBookList x WHERE x.ArticleBookListK=$T.ArticleBookListK)</EXPRESSION>
      </CONDITION>
      

      <EDIT NAME="UserK" ALIAS="User" TYPE="I4">
         <LOOKUP CACHE="user.edit">SELECT UserK, FDisplayName + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="SuperK" ALIAS="Super" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="ParentK" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="CreateD" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="UpdateD" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="articlebooklist.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=290 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="articlebooklist.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=291 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="500" />
      <EDIT NAME="FSearchName" ALIAS="SearchName" TYPE="STR" MAX="200" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FReleased" ALIAS="Released" TYPE="DATE" />
      <EDIT NAME="FReady" ALIAS="Ready" TYPE="I2" />
      <EDIT NAME="FDepreciated" ALIAS="Depreciated" TYPE="I2" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="I2" />
      <EDIT NAME="FCount1" ALIAS="Count" TYPE="INT" />
      <EDIT NAME="FCount2" ALIAS="Count2" TYPE="INT" />
   </TABLETEMPLATE>
   
   <TABLETEMPLATE ID="application.articlebook">
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="SuperK" ALIAS="Super" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _ab.FHeader FROM $O{APP}TArticleBook _ab WHERE _ab.ArticleBookK=$T.SuperK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="ParentK" ALIAS="Parent" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _tn.name FROM $Otable_number _tn WHERE _tn.number=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="table_number">SELECT number, name FROM $Otable_number ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TArticleBookCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TArticleBookUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlebook.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=150 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlebook.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=151 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="LanguageC" ALIAS="Language" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlebook.language">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=152 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="LevelC" ALIAS="Level" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlebook.level">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=153 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="PriorityC" ALIAS="Priority" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlebook.priority">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=154 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FSearchName" ALIAS="Search name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FHeader" ALIAS="Header" TYPE="STR" CONDITION="1" />
      <FIELD ID="Indent.FHeader" NAME="FHeader" ALIAS="Indented Header" CONDITION="1" TYPE="STR" DESCRIPTION="Indent header based on level in article tree if it belongs to any">
         <FORMULA TYPE="HTML" />
         <EXPRESSION>
            ('&lt;span style="margin-left:' + CAST( ISNULL( (SELECT TOP 1 _t.FDepth FROM $Othread _t WHERE _t.FKey=$T.ArticleBookK AND _t."table_number" = 1170), 0 ) AS VARCHAR(10)) + 'em;"&gt;' + $T.FHeader + '&lt;/span&gt;')
         </EXPRESSION>
      </FIELD>
      <FIELD NAME="FReleased" ALIAS="Released" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FReleased" SIMPLENAME="~TArticleBookFReleased Released" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FReady" ALIAS="Ready" TYPE="BOOLEAN" CONDITION="1" />
      <FIELD NAME="FDepreciated" ALIAS="Depreciated" TYPE="BOOLEAN" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1" />
      <FIELD ID="Note" NAME="FDescription" ALIAS="Note" TYPE="STR" CONDITION="expression">
         <EXPRESSION>(SELECT TOP 1 _n.FNote FROM $OTNote _n WHERE _n.RecordK=$T.ArticleBookK AND _n.table_number=1170)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountArticle" NAME="ArticleBookK" ALIAS="Count art." SIMPLENAME="Number of articles" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTrArticleBookXArticle _r WHERE _r.ArticleBookK=$T.ArticleBookK)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountLink" NAME="ArticleBookK" ALIAS="Count link" SIMPLENAME="Number of links" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTLink _l WHERE _l.ParentK=$T.ArticleBookK AND _l.table_number=1170)</EXPRESSION>
      </FIELD>
      <FIELD ID="Hashtag.ArticleBookK" NAME="ArticleBookK" ALIAS="Hashtag" TYPE="STR" ALIGN="L" FF="v" CONDITION="expression">
         <EXPRESSION>CAST( STUFF( (SELECT ' ' + _tn.FName FROM $OTTag _t JOIN $OTTagName _tn ON _tn.TagNameK= _t.TagNameK AND _t.table_number=1170 WHERE _t.ParentK=$T.ActivityK ORDER BY 1 FOR XML PATH(''))  ,1,1,'' ) AS NVARCHAR(MAX))</EXPRESSION>
      </FIELD>
      
      <FIELD ID="Hashtag" NAME="ArticleBookK" ALIAS="Hashtag" TYPE="STR" DESCRIPTION="Hastags connected to book">
         <EXPRESSION>
CAST( 
STUFF( 
   (SELECT ',' + _b.FName FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _r.ParentK=$T.ArticleBookK AND _r.table_number=1170),
   1,1,'' )
   AS NVARCHAR(512)
)
         </EXPRESSION>
      </FIELD>
      <CONDITION ID="Hashtag" NAME="ArticleBookK" SIMPLENAME="Hashtag" TYPE="STR" NOVALUE="1" INTELLISENSE="hashtag_name">
         <EXPRESSION>
$T.$F $_operator (SELECT _r.ParentK FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _b.FName $_condition AND _r.table_number=1170)
         </EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      
      
      <CONDITION ID="ArticleBookListK" NAME="ArticleBookK" SIMPLENAME="ID (Book list)" TYPE="INT" DESCRIPTION="Condition to compare to list">
         <EXPRESSION>(SELECT x.ArticleBookListK FROM $OTrArticleBookXArticleBookList x WHERE x.ArticleBookK=$T.ArticleBookK)</EXPRESSION>
      </CONDITION>

      <EDIT NAME="UserK" ALIAS="User" TYPE="I4">
         <LOOKUP CACHE="user.edit">SELECT UserK, FDisplayName + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="SuperK" ALIAS="Super" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="Parent" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="articlebook.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=150 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="INT">
         <LOOKUP CACHE="articlebook.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=151 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="LanguageC" ALIAS="Language" TYPE="INT">
         <LOOKUP CACHE="articlebook.language.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=152 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="LevelC" ALIAS="Level" TYPE="INT">
         <LOOKUP CACHE="articlebook.level.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=153 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="PriorityC" ALIAS="Priority" TYPE="INT">
         <LOOKUP CACHE="articlebook.priority.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=154 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="500" />
      <EDIT NAME="FSearchName" ALIAS="Search name" TYPE="STR" MAX="200" />
      <EDIT NAME="FHeader" ALIAS="Header" TYPE="STR" MAX="200" />
      <EDIT NAME="FReleased" ALIAS="Released" TYPE="DATE" />
      <EDIT NAME="FReady" ALIAS="Ready" TYPE="BOOLEAN" />
      <EDIT NAME="FDepreciated" ALIAS="Depreciated" TYPE="BOOLEAN" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" />
   </TABLETEMPLATE>

   <TABLETEMPLATE ID="application.articlechapter">
      <FIELD NAME="ArticleBookK" ALIAS="ArticleBookK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="UserK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="SuperK" ALIAS="SuperK" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT COALESCE(_ac.FName,_ac.FHeader,'') FROM $OTArticleChapter _ac WHERE _ac.ArticleChapterK=$T.SuperK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="ParentK" ALIAS="ParentK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="CreateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TArticleChapterCreateD CreateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="UpdateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TArticleChapterUpdateD UpdateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="TypeC" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlechapter.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=240 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="StateC" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlechapter.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=241 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="LanguageC" ALIAS="LanguageC" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlechapter.language">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=242 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      
      <FIELD ID="FName-Indent" NAME="FName" ALIAS="Indented name" CONDITION="1" TYPE="STR" DESCRIPTION="Indent name based on level in chapter tree if it belongs to any">
         <FORMULA TYPE="HTML" />
         <EXPRESSION>
CONCAT( SPACE( ISNULL( (SELECT TOP 1 _t.FDepth FROM application.thread _t WHERE _t.FKey=$T.ArticleChapterK AND _t."table_number" = 1340), 0 ) * 3), $T.FName)
         </EXPRESSION>
      </FIELD>
      
      <FIELD NAME="FHeader" ALIAS="Header" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FText" ALIAS="Text" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FHelp" ALIAS="Help" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FIndex" ALIAS="Index" TYPE="INT" CONDITION="1" />
      <FIELD NAME="FReleased" ALIAS="Released" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FReleased" SIMPLENAME="~TArticleChapterFReleased FReleased" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>

      <FIELD ID="CountArticle" NAME="ArticleChapterK" ALIAS="Article count" SIMPLENAME="Article count for chater" TYPE="INT" CONDITION="expression" DESCRIPTION="How many articles connected to chapter">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTrArticleChapterXArticle _x WHERE _x.ArticleChapterK=$T.ArticleChapterK)</EXPRESSION>
      </FIELD>
      
      <FIELD NAME="FReady" ALIAS="Ready" TYPE="BOOLEAN" CONDITION="1" />
      <FIELD NAME="FDepreciated" ALIAS="Depreciated" TYPE="BOOLEAN" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1" />

      <EDIT NAME="ArticleBookK" ALIAS="ArticleBookK" TYPE="I4" />
      <EDIT NAME="UserK" ALIAS="UserK" TYPE="I4" />
      <EDIT NAME="SuperK" ALIAS="SuperK" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="ParentK" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="CreateD" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="UpdateD" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="TypeC" TYPE="I4">
         <LOOKUP CACHE="articlechapter.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=240 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="StateC" TYPE="I4">
         <LOOKUP CACHE="articlechapter.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=241 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="LanguageC" ALIAS="LanguageC" TYPE="I4">
         <LOOKUP CACHE="articlechapter.language.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=242 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="500" />
      <EDIT NAME="FHeader" ALIAS="Header" TYPE="STR" MAX="200" />
      <EDIT NAME="FText" ALIAS="Text" TYPE="STR" />
      <EDIT NAME="FHelp" ALIAS="Help" TYPE="STR" MAX="1000" />
      <EDIT NAME="FIndex" ALIAS="Index" TYPE="INT" />
      <EDIT NAME="FReleased" ALIAS="Released" TYPE="DATE" />
      <EDIT NAME="FReady" ALIAS="Ready" TYPE="BOOLEAN" />
      <EDIT NAME="FDepreciated" ALIAS="Depreciated" TYPE="BOOLEAN" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" />
   </TABLETEMPLATE>

   <TABLETEMPLATE ID="application.articlepresentation">
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="SuperK" ALIAS="Super" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _ab.FName FROM $O{APP}TArticlePresentation _ap WHERE _ap.ArticleBookK=$T.SuperK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="ParentK" ALIAS="ParentK" TYPE="I4" CONDITION="1" />
      <CONDITION ID="ArticlePresentationK-Name" NAME="ArticlePresentationK" SIMPLENAME="Presentation name" TYPE="INT">
         <LOOKUP>SELECT ArticlePresentationK, COALESCE( FName, FSearchName, FDescription ) FROM $OTArticlePresentation ORDER BY 2</LOOKUP>
      </CONDITION>
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="CreateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TArticlePresentationCreateD CreateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="UpdateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TArticlePresentationUpdateD UpdateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>

      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlepresentation.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=250 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlepresentation.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=251 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FSearchName" ALIAS="Search name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FReleasedD" ALIAS="Released" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FReleasedD" SIMPLENAME="~TArticlePresentationFReleasedD Released" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      
      <FIELD NAME="FReady" ALIAS="Ready" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FDepreciated" ALIAS="Depreciated" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>

      <EDIT NAME="UserK" ALIAS="User" TYPE="I4">
         <LOOKUP CACHE="user.edit">SELECT UserK, FDisplayName + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="SuperK" ALIAS="SuperK" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="ParentK" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="CreateD" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="UpdateD" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="articlepresentation.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=250 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="articlepresentation.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=251 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="500" />
      <EDIT NAME="FSearchName" ALIAS="Search name" TYPE="STR" MAX="200" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FReleasedD" ALIAS="Released" TYPE="DATE" />
      <EDIT NAME="FReady" ALIAS="Ready" TYPE="I2" />
      <EDIT NAME="FDepreciated" ALIAS="Depreciated" TYPE="I2" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="I2" />
   </TABLETEMPLATE>
   
   <TABLETEMPLATE ID="application.articlepresentationxarticle">
      <!-- <FIELD NAME="ArticlePresentationK" ALIAS="Presentation" TYPE="I4" CONDITION="1" /> -->
      <FIELD NAME="ArticlePresentationK" ALIAS="Presentation name" DISPLAYTYPE="STR" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COALESCE( _a.FName, _a.FSearchName, _a.FDescription ) FROM $OTArticlePresentation _a WHERE _a.ArticlePresentationK=$T.ArticlePresentationK)</EXPRESSION>
      </FIELD>
      <!-- <FIELD NAME="ArticleK" ALIAS="ArticleK" TYPE="I4" CONDITION="1" /> -->
      <FIELD NAME="ArticleK" ALIAS="Article name" TYPE="STR" CONDITION="expression">
         <EXPRESSION>(SELECT COALESCE( _a.FBrief, _a.FHeader, _a.FSearchText ) FROM $OTArticle _a WHERE _a.ArticleK=$T.ArticleK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="SuperK" ALIAS="SuperK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlepresentationxarticle.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=260 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="TransitionC" ALIAS="Transition" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlepresentationxarticle.transition">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=261 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StyleC" ALIAS="Style" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlepresentationxarticle.style">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=262 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="NameStyleC" ALIAS="Name style" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlepresentationxarticle.namestyle">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=263 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="LevelC" ALIAS="Level" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlepresentationxarticle.level">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=264 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="TargetC" ALIAS="Target" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlepresentationxarticle.target">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=265 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDevelop" ALIAS="Develop" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FPage" ALIAS="Page" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FOrder" ALIAS="Order" TYPE="I4" CONDITION="1" />

      <EDIT NAME="ArticlePresentationK" ALIAS="ID (Presentation)" TYPE="INT" />
      <EDIT NAME="ArticleK" ALIAS="ID (Article)" TYPE="INT" />
      <EDIT NAME="SuperK" ALIAS="SuperK" TYPE="I4" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="articlepresentationxarticle.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=260 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="TransitionC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="articlepresentationxarticle.transition.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=261 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StyleC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="articlepresentationxarticle.style.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=262 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="NameStyleC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="articlepresentationxarticle.namestyle.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=263 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="LevelC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="articlepresentationxarticle.level.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=264 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="TargetC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="articlepresentationxarticle.target.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=265 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="500" />
      <EDIT NAME="FDevelop" ALIAS="Develop" TYPE="STR" MAX="100" />
      <EDIT NAME="FPage" ALIAS="Page" TYPE="I4" />
      <EDIT NAME="FOrder" ALIAS="Order" TYPE="I4" />
   </TABLETEMPLATE>
   
   <TABLETEMPLATE ID="application.badge">
      <FIELD NAME="CreateD" ALIAS="Created" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~CreateD Created" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" DISPLAY="0" />
      <CONDITION NAME="FName" SIMPLENAME="Name" TYPE="STR" INTELLISENSE="hashtag_name" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FInteger0" ALIAS="Integer" TYPE="INT" CONDITION="1" />

      <FIELD ID="CountActivity" NAME="BadgeK" ALIAS="Count act." SIMPLENAME="Number of activities" TYPE="INT" CONDITION="expression" CONDITIONGROUP="activity.conditions" REPLACE="?">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTActivity _a JOIN $OTrXBadge x ON _a.ActivityK = x.ParentK AND x.table_number = 1110 WHERE x.BadgeK = $T.BadgeK ?)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountArticle" NAME="BadgeK" ALIAS="Count art." SIMPLENAME="Number of articles" TYPE="INT" CONDITION="expression" CONDITIONGROUP="article.conditions" REPLACE="?">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTArticle _a JOIN $OTrXBadge x ON _a.ArticleK = x.ParentK AND x.table_number = 1160 WHERE x.BadgeK = $T.BadgeK ?)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountArticleBook" NAME="BadgeK" ALIAS="Count book" SIMPLENAME="Number of books" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTArticleBook _ab JOIN $OTrXBadge x ON _ab.ArticleBookK = x.ParentK AND x.table_number = 1170 WHERE x.BadgeK = $T.BadgeK)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountCustomer" NAME="BadgeK" ALIAS="Count customer" SIMPLENAME="Number of customers" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTCustomer _c JOIN $OTrXBadge x ON _c.CustomerK = x.ParentK AND x.table_number = 1030 WHERE x.BadgeK = $T.BadgeK)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountProject" NAME="BadgeK" ALIAS="Count projects" SIMPLENAME="Number of projects" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTProject _p JOIN $OTrXBadge x ON _p.ProjectK = x.ParentK AND x.table_number = 1050 WHERE x.BadgeK = $T.BadgeK)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountRequest" NAME="BadgeK" ALIAS="Count request" SIMPLENAME="Number of requests" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTSystemRequest _sr JOIN $OTrXBadge x ON _sr.SystemRequestK = x.ParentK AND x.table_number = 1150 WHERE x.BadgeK = $T.BadgeK)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountSale" NAME="BadgeK" ALIAS="Count sale" SIMPLENAME="Number of sales" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTSale _s JOIN $OTrXBadge x ON _s.SaleK = x.ParentK AND x.table_number = 1060 WHERE x.BadgeK = $T.BadgeK)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountSystem" NAME="BadgeK" ALIAS="Count system" SIMPLENAME="Number of systems" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTSystem _s JOIN $OTrXBadge x ON _s.SystemK = x.ParentK AND x.table_number = 1010 WHERE x.BadgeK = $T.BadgeK)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountLink" NAME="BadgeK" ALIAS="Count system" SIMPLENAME="Number of links" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTLink _l JOIN $OTrXBadge x ON _l.LinkK = x.ParentK AND x.table_number = 1100 WHERE x.BadgeK = $T.BadgeK)</EXPRESSION>
      </FIELD>
      
      <CONDITION ID="FName-Activity" NAME="FName" SIMPLENAME="Activity hashtag" TYPE="STR" INTELLISENSE="hashtag_name_activity" />
      <CONDITION ID="FName-Article" NAME="FName" SIMPLENAME="Article hashtag" TYPE="STR" INTELLISENSE="hashtag_name_article" />
      <CONDITION ID="FName-Book" NAME="FName" SIMPLENAME="Book hashtag" TYPE="STR" INTELLISENSE="hashtag_name_book" />
      <CONDITION ID="FName-Customer" NAME="FName" SIMPLENAME="Customer hashtag" TYPE="STR" INTELLISENSE="hashtag_name_customer" />
      <CONDITION ID="FName-Project" NAME="FName" SIMPLENAME="Project hashtag" TYPE="STR" INTELLISENSE="hashtag_name_project" />
      <CONDITION ID="FName-Request" NAME="FName" SIMPLENAME="Request hashtag" TYPE="STR" INTELLISENSE="hashtag_name_systemrequest" />
      <CONDITION ID="FName-Sale" NAME="FName" SIMPLENAME="Sale hashtag" TYPE="STR" INTELLISENSE="hashtag_name_sale" />
      <CONDITION ID="FName-System" NAME="FName" SIMPLENAME="System hashtag" TYPE="STR" INTELLISENSE="hashtag_name_system" />
      
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="200" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="I2" />
      <EDIT NAME="FInteger0" ALIAS="Integer" TYPE="INT" />
   </TABLETEMPLATE>
   
   
   <TABLETEMPLATE ID="application.bundle">
      <FIELD NAME="SuperK" ALIAS="SuperK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="RecordK" ALIAS="RecordK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="ParentK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <CONDITION NAME="CreateD" SIMPLENAME="~CreateD Created" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Updated" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~UpdateD Updated" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FId" ALIAS="Id" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      
      <FIELD NAME="FBegin" ALIAS="Begin" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FBegin" SIMPLENAME="~TProjectFBegin Begin" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FEnd" ALIAS="End" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FEnd" SIMPLENAME="~TProjectFEnd End" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FLength" ALIAS="Length" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FValue" ALIAS="Value" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="I2" CONDITION="1" />

      <EDIT NAME="SuperK" ALIAS="SuperK" TYPE="I4" />
      <EDIT NAME="RecordK" ALIAS="RecordK" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="ParentK" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="FId" ALIAS="Id" TYPE="STR" MAX="50" />
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="500" />
      <EDIT NAME="FBegin" ALIAS="Begin" TYPE="DATE" />
      <EDIT NAME="FEnd" ALIAS="End" TYPE="DATE" />
      <EDIT NAME="FLength" ALIAS="Length" TYPE="I4" />
      <EDIT NAME="FValue" ALIAS="Value" TYPE="R8" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="I2" />
   </TABLETEMPLATE>

   
   
   

   <TABLETEMPLATE ID="application.customer">
      <FIELD NAME="GlobalK" ALIAS="Global" TYPE="I4" CONDITION="1" />
      <FIELD NAME="SuperK" ALIAS="Super" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="CreateD" ALIAS="Created" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~CreateD Created" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Updated" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~UpdateD Updated" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.CategoryC)</EXPRESSION>
         <LOOKUP CACHE="customer.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=40 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="CategoryC" ALIAS="Category" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.CategoryC)</EXPRESSION>
         <LOOKUP CACHE="customer.category">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=41 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="BusinessC" ALIAS="Business" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.BusinessC)</EXPRESSION>
         <LOOKUP CACHE="customer.category">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=42 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="CountryC" ALIAS="Country" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.CountryC)</EXPRESSION>
         <LOOKUP CACHE="customer.country">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=43 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FDepartment" ALIAS="Department" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      
      <FIELD ID="CountArticle" NAME="CustomerK" ALIAS="Count art." SIMPLENAME="Number of articles" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTArticle _a WHERE _a.ParentK = $T.CustomerK AND _a.table_number = 1030)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountBooks" NAME="CustomerK" ALIAS="Count books" SIMPLENAME="Number of books" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTArticleBook _ab WHERE _ab.ParentK = $T.CustomerK AND _ab.table_number = 1030)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountActivity" NAME="CustomerK" ALIAS="Count act." SIMPLENAME="Number of activities" TYPE="INT" CONDITION="expression" CONDITIONGROUP="activity.conditions" REPLACE="?">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTActivity _a WHERE _a.ParentK = $T.CustomerK AND _a.table_number = 1030 ?)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountSale" NAME="CustomerK" ALIAS="Count sales." SIMPLENAME="Number of Sales" TYPE="INT" CONDITION="expression" CONDITIONGROUP="sale.conditions" REPLACE="?">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTSale _s WHERE _s.CustomerK = $T.CustomerK ?)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountTodo" NAME="CustomerK" ALIAS="Count todo" SIMPLENAME="Number of todos" TYPE="INT" CONDITION="expression" CONDITIONGROUP="todo.conditions" REPLACE="?">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTTodo _t JOIN $OTTodoList _tl ON _t.TodoListK = _tl.TodoListK WHERE _tl.ParentK = $T.CustomerK AND _tl.table_number = 1030 ?)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountTodoListAndTodo" NAME="CustomerK" ALIAS="Count todo" SIMPLENAME="Lists and todo count" TYPE="INT" CONDITION="expression" CONDITIONGROUP="todo.conditions" REPLACE="?">
         <EXPRESSION>CONCAT(
(SELECT COUNT(*) FROM $OTTodoList _tl WHERE _tl.ParentK = $T.CustomerK AND _tl.table_number = 1030 AND _tl.FReady=0 AND _tl.FDeleted=0)
,' : '
,(SELECT COUNT(*) FROM $OTTodo _t JOIN $OTTodoList _tl ON _t.TodoListK = _tl.TodoListK WHERE _tl.ParentK = $T.CustomerK AND _tl.table_number = 1030 ?) )
         </EXPRESSION>
      </FIELD>
      <FIELD ID="CountProperty" NAME="CustomerK" ALIAS="Count property" SIMPLENAME="Number of property" TYPE="INT" CONDITION="expression" CONDITIONGROUP="property.conditions" REPLACE="?">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTProperty _p WHERE _p.ParentK = $T.CustomerK AND _p.table_number = 1030 ?)</EXPRESSION>
      </FIELD>
      
      <FIELD ID="FName-Indent" NAME="FName" ALIAS="Indented Name" CONDITION="1" TYPE="STR" DESCRIPTION="Indent name based on level in customer tree if it belongs to any">
         <FORMULA TYPE="HTML" />
         <EXPRESSION>
('&lt;span style="margin-left:' + CAST( ISNULL( (SELECT TOP 1 _t.FDepth FROM $Othread _t WHERE _t.FKey=$T.CustomerK AND _t."table_number" = 1030), 0 ) AS VARCHAR(10)) + 'em;"&gt;' + $T.FName + '&lt;/span&gt;')
         </EXPRESSION>
      </FIELD>
      
      
      <FIELD ID="ThreadName" NAME="CustomerK" ALIAS="Thread Name" TYPE="STR" CONDITION="expression" INTELLISENSE="customer_thread_name" DESCRIPTION="The thread name, same as code name to root customer">
         <EXPRESSION>(SELECT TOP 1 _s.FName FROM $OTCustomer _s JOIN $Othread_header _th ON _s.CustomerK = _th.FThreadId AND _th."table_number" = 1030 JOIN $Othread _t ON _th.FThreadId = _t.FThreadId AND _t."table_number" = 1030 WHERE _t.FKey=$T.CustomerK)</EXPRESSION>
      </FIELD>
      <FIELD ID="ThreadShortName" NAME="CustomerK" ALIAS="Thread Name" TYPE="STR" CONDITION="expression" DESCRIPTION="The abbreviated name for thread">
         <EXPRESSION>(SELECT TOP 1 CASE WHEN _s.FAbbreviation IS NOT NULL THEN _s.FAbbreviation ELSE _s.FName END FROM $OTCustomer _s JOIN $Othread_header _th ON _s.CustomerK = _th.FThreadId AND _th."table_number" = 1030 JOIN $Othread _t ON _th.FThreadId = _t.FThreadId AND _t."table_number" = 1030 WHERE _t.FKey=$T.CustomerK)</EXPRESSION>
      </FIELD>
      
      <FIELD ID="Hashtag" NAME="CustomerK" ALIAS="Hashtag" TYPE="STR" DESCRIPTION="Hastags connected to system">
         <EXPRESSION>
CAST( 
STUFF( 
   (SELECT ',' + _b.FName FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _r.ParentK=$T.CustomerK AND _r.table_number=1030),
   1,1,'' )
   AS NVARCHAR(512)
)
         </EXPRESSION>
      </FIELD>
      <CONDITION ID="Hashtag" NAME="CustomerK" SIMPLENAME="Hashtag" TYPE="STR" NOVALUE="1" INTELLISENSE="hashtag_name">
         <EXPRESSION>
$T.$F $_operator (SELECT _r.ParentK FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _b.FName $_condition AND _r.table_number=1030)
         </EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      
      <EDIT NAME="GlobalK" ALIAS="Global" TYPE="I4" />
      <EDIT NAME="SuperK" ALIAS="Super" TYPE="I4" />
      <EDIT NAME="UserK" ALIAS="User" TYPE="I4">
         <LOOKUP CACHE="user.edit">SELECT UserK, FDisplayName + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="CreateD" ALIAS="Created" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Updated" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="TypeC" TYPE="I4">
         <LOOKUP CACHE="customer.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=40 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="CategoryC" ALIAS="CategoryC" TYPE="I4">
         <LOOKUP CACHE="customer.category.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=41 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="BusinessC" ALIAS="BusinessC" TYPE="I4">
         <LOOKUP CACHE="customer.business.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=42 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="CountryC" ALIAS="CountryC" TYPE="I4">
         <LOOKUP CACHE="customer.country.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=43 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="100" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FDepartment" ALIAS="Department" TYPE="STR" MAX="100" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
   </TABLETEMPLATE>

   <TABLETEMPLATE ID="application.customercontact">
      <FIELD NAME="CustomerK" ALIAS="Customer" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT FName FROM $OTCustomer c WHERE c.CustomerK=$T.CustomerK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TCustomerContactCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TCustomerContactUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CategoryC" ALIAS="Category" TYPE="I4" CONDITION="1" />
      <FIELD NAME="BusinessC" ALIAS="Business" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CountryC" ALIAS="Country" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FFirstName" ALIAS="First name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FLastName" ALIAS="Last name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FTitle" ALIAS="Title" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDepartment" ALIAS="Department" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FPhone" ALIAS="Phone" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FMobile" ALIAS="Mobile" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FMail" ALIAS="Mail" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FNickname" ALIAS="Mail" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FGender" ALIAS="Gender" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FBirthYear" ALIAS="Birth year" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FBirthMonth" ALIAS="Birth month" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FBirthDay" ALIAS="Birth day" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FText0" ALIAS="Text0" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FText1" ALIAS="Text1" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FInteger0" ALIAS="Integer0" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FInteger1" ALIAS="Integer1" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FRetired" ALIAS="Retired" TYPE="BOOLEAN" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1" />

      <EDIT NAME="CustomerK" ALIAS="Customer" TYPE="I4" INTELLISENSE="customer_name_key" />
      <EDIT NAME="UserK" ALIAS="UserK" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4" />
      <EDIT NAME="CategoryC" ALIAS="Category" TYPE="I4" />
      <EDIT NAME="BusinessC" ALIAS="Business" TYPE="I4" />
      <EDIT NAME="CountryC" ALIAS="Country" TYPE="I4" />
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="100" />
      <EDIT NAME="FFirstName" ALIAS="First name" TYPE="STR" MAX="100" />
      <EDIT NAME="FLastName" ALIAS="Last name" TYPE="STR" MAX="100" />
      <EDIT NAME="FTitle" ALIAS="Title" TYPE="STR" MAX="100" />
      <EDIT NAME="FDepartment" ALIAS="Department" TYPE="STR" MAX="100" />
      <EDIT NAME="FPhone" ALIAS="Phone" TYPE="STR" MAX="100" />
      <EDIT NAME="FMobile" ALIAS="Mobile" TYPE="STR" MAX="100" />
      <EDIT NAME="FMail" ALIAS="Mail" TYPE="STR" MAX="100" />
      <EDIT NAME="FNickname" ALIAS="Mail" TYPE="STR" MAX="100" />
      <EDIT NAME="FGender" ALIAS="Gender" TYPE="I4" />
      <EDIT NAME="FBirthYear" ALIAS="Birth year" TYPE="I4" />
      <EDIT NAME="FBirthMonth" ALIAS="Birth month" TYPE="I4" />
      <EDIT NAME="FBirthDay" ALIAS="Birth day" TYPE="I4" />
      <EDIT NAME="FText0" ALIAS="Text0" TYPE="STR" MAX="100" />
      <EDIT NAME="FText1" ALIAS="Text1" TYPE="STR" MAX="100" />
      <EDIT NAME="FInteger0" ALIAS="Integer0" TYPE="I4" />
      <EDIT NAME="FInteger1" ALIAS="Integer1" TYPE="I4" />
      <EDIT NAME="FRetired" ALIAS="Retired" TYPE="BOOLEAN" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" />
   </TABLETEMPLATE>
   
   <TABLETEMPLATE ID="application.customerchapter">
      <FIELD NAME="CustomerChapterK" ALIAS="CustomerChapterK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CustomerK" ALIAS="CustomerK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="UserK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="SuperK" ALIAS="SuperK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="ParentK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="CreateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TCustomerChapterCreateD CreateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="UpdateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TCustomerChapterUpdateD UpdateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="customerchapter.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=300 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="customerchapter.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=301 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="LanguageC" ALIAS="Language" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="customerchapter.language">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=301 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FTypeName" ALIAS="TypeName" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FHeader" ALIAS="Header" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FText" ALIAS="Text" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FHelp" ALIAS="Help" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FIndex" ALIAS="Index" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FReleased" ALIAS="Released" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FReleased" SIMPLENAME="~TCustomerChapterFReleased FReleased" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FReady" ALIAS="Ready" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FDepreciated" ALIAS="Depreciated" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="I2" CONDITION="1" />
      
      <EDIT NAME="CustomerK" ALIAS="CustomerK" TYPE="I4" />
      <EDIT NAME="UserK" ALIAS="UserK" TYPE="I4" />
      <EDIT NAME="SuperK" ALIAS="SuperK" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="ParentK" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="CreateD" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="UpdateD" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="customerchapter.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=300 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="customerchapter.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=301 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="LanguageC" ALIAS="Language" TYPE="I4">
         <LOOKUP CACHE="customerchapter.language.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=302 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FTypeName" ALIAS="TypeName" TYPE="STR" MAX="50" />
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="500" />
      <EDIT NAME="FHeader" ALIAS="Header" TYPE="STR" MAX="200" />
      <EDIT NAME="FText" ALIAS="Text" TYPE="STR" />
      <EDIT NAME="FHelp" ALIAS="Help" TYPE="STR" MAX="1000" />
      <EDIT NAME="FIndex" ALIAS="Index" TYPE="I4" />
      <EDIT NAME="FReleased" ALIAS="Released" TYPE="DATE" />
      <EDIT NAME="FReady" ALIAS="Ready" TYPE="I2" />
      <EDIT NAME="FDepreciated" ALIAS="Depreciated" TYPE="I2" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="I2" />
   </TABLETEMPLATE>
   
   <TABLETEMPLATE ID="application.imnage">
      <FIELD NAME="SuperK" ALIAS="Super" TYPE="INT" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="Parent" TYPE="INT" CONDITION="1" />
      <FIELD NAME="RecordK" ALIAS="Record" TYPE="INT" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="MimeTypeS" ALIAS="Mime type" TYPE="I4" CONDITION="1" />
      <FIELD NAME="MimeName" ALIAS="Mime name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TImageCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TImageUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="image.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=270 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FTimeD" ALIAS="Time" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FTimeD" SIMPLENAME="~TImageFTimeD FTimeD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FFolder" ALIAS="Folder" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FData" ALIAS="Data" TYPE="BIN" CONDITION="1" />
      <FIELD NAME="FHide" ALIAS="Hide" TYPE="BOOLEAN" CONDITION="1" />

      <EDIT NAME="SuperK" ALIAS="Super" TYPE="I4" />
      <EDIT NAME="RecordK" ALIAS="Record" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="Parent" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="MimeTypeS" ALIAS="Mime type" TYPE="I4" />
      <EDIT NAME="MimeName" ALIAS="MimeName" TYPE="STR" MAX="250" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="image.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=270 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FTimeD" ALIAS="Time" TYPE="DATE" />
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="250" />
      <EDIT NAME="FFolder" ALIAS="older" TYPE="STR" MAX="250" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FData" ALIAS="Data" TYPE="BIN" />
      <EDIT NAME="FHide" ALIAS="Hide" TYPE="BOOLEAN" />
   </TABLETEMPLATE>
   
   <TABLETEMPLATE ID="application.document">
      <FIELD NAME="SuperK" ALIAS="Super" TYPE="INT" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="Parent" TYPE="INT" CONDITION="1" />
      <FIELD NAME="RecordK" ALIAS="Record" TYPE="INT" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="MimeTypeS" ALIAS="Mime type" TYPE="I4" CONDITION="1" />
      <FIELD NAME="MimeName" ALIAS="Mime name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TImageCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TImageUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FTimeD" ALIAS="Time" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FTimeD" SIMPLENAME="~TImageFTimeD FTimeD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FFolder" ALIAS="Folder" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FData" ALIAS="Data" TYPE="BIN" CONDITION="1" />

      <EDIT NAME="ImageK" ALIAS="Image" TYPE="I4" NULL="0" DEFAULT="0" />
      <EDIT NAME="SuperK" ALIAS="Super" TYPE="I4" />
      <EDIT NAME="RecordK" ALIAS="Record" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="Parent" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="MimeTypeS" ALIAS="Mime type" TYPE="I4" />
      <EDIT NAME="MimeName" ALIAS="MimeName" TYPE="STR" MAX="250" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="FTimeD" ALIAS="Time" TYPE="DATE" />
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="250" />
      <EDIT NAME="FFolder" ALIAS="Folder" TYPE="STR" MAX="250" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FData" ALIAS="Data" TYPE="BIN" />
   </TABLETEMPLATE>
   
<!-- Link table -->
   <TABLETEMPLATE ID="application.link">
      <FIELD NAME="SuperK" ALIAS="SuperK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="ParentK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TLinkCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TLinkUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="link.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=100 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FUrl" ALIAS="Url" TYPE="STR" CONDITION="1" />
      <FIELD ID="FUrl-Goto" NAME="FUrl" ALIAS="Link" TYPE="STR" CONDITION="1">
         <FORMULA TYPE="HTML" CODE="GD1">@this</FORMULA>
         <EXPRESSION><![CDATA[
CONCAT( '<a href="', $T.FUrl,'" target="_blank">',$T.FName,'</a>')
         ]]></EXPRESSION>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1" />
      <FIELD NAME="RecordK" ALIAS="Record" TYPE="I4" CONDITION="1" />
      
      <FIELD ID="Hashtag" NAME="LinkK" ALIAS="Hashtag" TYPE="STR" DESCRIPTION="Hastags connected to link">
         <EXPRESSION>
CAST( 
STUFF( 
   (SELECT ',' + _b.FName FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _r.ParentK=$T.LinkK AND _r.table_number=1100),
   1,1,'' )
   AS NVARCHAR(512)
)
         </EXPRESSION>
      </FIELD>
      <CONDITION ID="Hashtag" NAME="LinkK" SIMPLENAME="Hashtag" TYPE="STR" NOVALUE="1" INTELLISENSE="hashtag_name">
         <EXPRESSION>
$T.$F $_operator (SELECT _r.ParentK FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _b.FName $_condition AND _r.table_number=1100)
         </EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      

      <EDIT NAME="SuperK" ALIAS="Super" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="Parent" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="link.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=100 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FUrl" ALIAS="Url" TYPE="STR" MAX="1000" />
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="1000" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" />
      <EDIT NAME="RecordK" ALIAS="Record" TYPE="I4" />
   </TABLETEMPLATE>

<!-- Log table -->
   <TABLETEMPLATE ID="application.log">
      <FIELD NAME="CustomerK" ALIAS="Customer" TYPE="I4" CONDITION="1" />
      <FIELD NAME="SystemVersionK" ALIAS="SystemVersion" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TLogCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FormatS" ALIAS="Format" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ColorS" ALIAS="Color" TYPE="I4" CONDITION="1" />
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="log.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=120 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="TargetC" ALIAS="Target" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="log.target">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=121 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FTimeD" ALIAS="Time" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FTimeD" SIMPLENAME="~TLogFTimeD Time" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FBrief" ALIAS="Brief" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />

      <EDIT NAME="CustomerK" ALIAS="Customer" TYPE="I4" />
      <EDIT NAME="SystemVersionK" ALIAS="SystemVersion" TYPE="I4" />
      <EDIT NAME="UserK" ALIAS="User" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="FormatS" ALIAS="Format" TYPE="I4" />
      <EDIT NAME="ColorS" ALIAS="Color" TYPE="I4" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="log.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=120 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="TargetC" ALIAS="Target" TYPE="I4">
         <LOOKUP CACHE="log.target.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=121 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FTimeD" ALIAS="Time" TYPE="DATE" />
      <EDIT NAME="FBrief" ALIAS="Brief" TYPE="STR" MAX="200" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="2000" />
   </TABLETEMPLATE>

<!-- Notes table -->
   <TABLETEMPLATE ID="application.note">
      <FIELD NAME="NoteK" ALIAS="Note" TYPE="I4" CONDITION="1" />
      <FIELD NAME="SuperK" ALIAS="Super" TYPE="I4" CONDITION="1" />
      <FIELD NAME="RecordK" ALIAS="Record" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="Parent" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FormatS" ALIAS="FormatS" TYPE="I4" CONDITION="1" />
      <FIELD NAME="TypeC" ALIAS="TypeC" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TNoteCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TNoteUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FTimeD" ALIAS="Time" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FTimeD" SIMPLENAME="~TNoteFTimeD FTime" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FNote" ALIAS="Note" TYPE="STR" CONDITION="1" BO="1" DISPLAY="0" />

      <EDIT NAME="NoteK" ALIAS="Note" TYPE="I4" NULL="0" DEFAULT="0" />
      <EDIT NAME="SuperK" ALIAS="Super" TYPE="I4" />
      <EDIT NAME="RecordK" ALIAS="Record" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="Parent" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="FormatS" ALIAS="FormatS" TYPE="I4" />
      <EDIT NAME="TypeC" ALIAS="TypeC" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="FTimeD" ALIAS="Time" TYPE="DATE" />
      <EDIT NAME="FNote" ALIAS="Note" TYPE="STR" />
   </TABLETEMPLATE>

   <TABLETEMPLATE ID="application.number">
      <FIELD NAME="ParentK" ALIAS="Parent" TYPE="INT" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="CreateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TNumberCreateD CreateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="UpdateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TNumberUpdateD UpdateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="number.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=200 ORDER BY 2</LOOKUP>
      </FIELD>

      <FIELD NAME="CountryC" ALIAS="Country" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="number.country">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=201 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FHead" ALIAS="Head" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FNumber" ALIAS="Number" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FTail" ALIAS="Tail" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1" />

      <EDIT NAME="ParentK" ALIAS="Parent" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="number.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=200 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="CountryC" ALIAS="Country" TYPE="I4">
         <LOOKUP CACHE="number.country.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=200 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FHead" ALIAS="Head" TYPE="STR" MAX="100" />
      <EDIT NAME="FNumber" ALIAS="Number" TYPE="STR" MAX="1000" />
      <EDIT NAME="FTail" ALIAS="Tail" TYPE="STR" MAX="100" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" />
   </TABLETEMPLATE>




<!-- Global table -->
   <TABLETEMPLATE ID="application.global">
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" CONDITION="1" DESCRIPTION="Type of global, global acts as a owner and can be used to divide the database into diffrent sections or using it for multiple companies where they only can access their own data">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="global.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=1 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DESCRIPTION="Real name for owner, could be a company" />
      <FIELD NAME="FSimpleName" ALIAS="Short name" TYPE="STR" CONDITION="1" DESCRIPTION="Simplified owner name, maybe company" DISPLAY="0" />
   </TABLETEMPLATE>
   

   <TABLETEMPLATE ID="application.project">
      <FIELD NAME="SuperK" ALIAS="Super" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="Parent" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TProjectCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TProjectUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" SIMPLENAME="~project_type Project type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="project.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=50 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="StateC" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.StateC)</EXPRESSION>
         <LOOKUP CACHE="project.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=51 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="AreaC" ALIAS="AreaC" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.AreaC)</EXPRESSION>
         <LOOKUP CACHE="activity.area">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=63 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD ID="Note" NAME="FDescription" ALIAS="Note" TYPE="STR" CONDITION="expression">
         <EXPRESSION>(SELECT TOP 1 _n.FNote FROM $OTNote _n WHERE _n.RecordK=$T.ProjectK AND _n.table_number=1050)</EXPRESSION>
      </FIELD>
      <FIELD NAME="FText0" ALIAS="Text0" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FText1" ALIAS="Text1" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FBeginD" ALIAS="Begin" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FBeginD" SIMPLENAME="~TProjectFBeginD FBegin" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FEndD" ALIAS="End" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FEndD" SIMPLENAME="~TProjectFEndD FEnd" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FDeadlineD" ALIAS="Deadline" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FDeadlineD" SIMPLENAME="~TProjectFDeadlineD FDeadline" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD ID="Start" NAME="FBeginD" ALIAS="Start" TYPE="ODATE" CONDITION="expression">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST((CASE WHEN $T.FBeginD IS NULL THEN $T.CreateD ELSE $T.FBeginD END) AS float )</EXPRESSION>
      </FIELD>
      <FIELD NAME="FTodo" ALIAS="Todo" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FDone" ALIAS="Done" TYPE="BOOLEAN" SIMPLENAME="~FDone Completed" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FPrivate" ALIAS="Private" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD ID="VersionName" NAME="ProjectK" ALIAS="Version" TYPE="I4" DISPLAYTYPE="STR" CONDITION="expression">
         <EXPRESSION>
            (SELECT TOP 1 (SELECT TOP 1 s.FName FROM $OTSystem s WHERE s.SystemK=_sv.SystemK) + ', ' + CAST(_sv.FVersion1 AS NVARCHAR(5)) + ':' + CAST(_sv.FVersion2 AS NVARCHAR(5)) + ':' + CAST(_sv.FVersion3 AS NVARCHAR(5))
            FROM $OTrSystemVersionXProject _r JOIN $OTSystemVersion _sv ON _r.SystemVersionK=_sv.SystemVersionK WHERE _r.ProjectK=$T.ProjectK)
         </EXPRESSION>
      </FIELD>
      
      <FIELD ID="Hashtag" NAME="ProjectK" ALIAS="Hashtag" TYPE="STR" DESCRIPTION="Hastags connected to project">
         <EXPRESSION>
CAST( 
STUFF( 
   (SELECT ',' + _b.FName FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _r.ParentK=$T.$F AND _r.table_number=1050),
   1,1,'' )
   AS NVARCHAR(512)
)
         </EXPRESSION>
      </FIELD>
      <CONDITION ID="Hashtag" NAME="ProjectK" SIMPLENAME="Hashtag" TYPE="STR" NOVALUE="1" INTELLISENSE="hashtag_name">
         <EXPRESSION>
$T.$F $_operator (SELECT _r.ParentK FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _b.FName $_condition AND _r.table_number=1050)
         </EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      


      <EDIT NAME="SuperK" ALIAS="Super" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="Parent" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="UserK" ALIAS="User" TYPE="I4">
         <LOOKUP CACHE="user.edit">SELECT UserK, FDisplayName + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="project.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=50 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="project.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=51 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="AreaC" ALIAS="Area" TYPE="I4">
         <LOOKUP CACHE="activity.area.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=63 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="500" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FText0" ALIAS="Text0" TYPE="STR" MAX="100" />
      <EDIT NAME="FText1" ALIAS="Text1" TYPE="STR" MAX="100" />
      <EDIT NAME="FBeginD" ALIAS="Begin" TYPE="DATE" />
      <EDIT NAME="FEndD" ALIAS="End" TYPE="DATE" />
      <EDIT NAME="FDeadlineD" ALIAS="Deadline" TYPE="DATE" />
      <EDIT NAME="FTodo" ALIAS="Todo" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FDone" ALIAS="Done" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FPrivate" ALIAS="Private" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
   </TABLETEMPLATE>
   
   <TABLETEMPLATE ID="application.projectphase">
      <FIELD NAME="ProjectK" ALIAS="ProjectK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      
      <FIELD NAME="CustomerContactK" ALIAS="Contact" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT COALESCE(_cc.FNickname, _cc.FFirstName,_cc.FTitle) FROM $OTCustomerContact _cc WHERE _cc.CustomerContactK=$T.CustomerContactK)</EXPRESSION>
         <LOOKUP>SELECT CustomerContactK, COALESCE(_cc.FNickname, _cc.FFirstName) FROM $OTCustomerContact _cc WHERE _cc.CustomerK = {=CustomerK}</LOOKUP>
      </FIELD>

      <FIELD NAME="CustomerChapterK" ALIAS="Chapter" TYPE="STR" CONDITION="expression">
         <EXPRESSION>(SELECT COALESCE(_cc.FName, _cc.FHeader) FROM $OTCustomerChapter _cc WHERE _cc.CustomerChapterK=$T.CustomerChapterK)</EXPRESSION>
      </FIELD>

      <FIELD NAME="CreateD" ALIAS="CreateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TProjectPhaseCreateD CreateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="UpdateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TProjectPhaseUpdateD UpdateD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="TypeC" ALIAS="Type" SIMPLENAME="~project_type Project type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="projectphase.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=280 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.StateC)</EXPRESSION>
         <LOOKUP CACHE="projectphase.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=281 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="PriorityC" ALIAS="Priority" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.StateC)</EXPRESSION>
         <LOOKUP CACHE="projectphase.priority">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=282 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="LevelC" ALIAS="Level" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.LevelC)</EXPRESSION>
         <LOOKUP CACHE="projectphase.level">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=283 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="ProgressC" ALIAS="Progress" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.LevelC)</EXPRESSION>
         <LOOKUP CACHE="projectphase.progress">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=284 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FBeginD" ALIAS="BeginD" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FBeginD" SIMPLENAME="~TProjectPhaseFBeginD FBeginD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FEndD" ALIAS="EndD" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FEndD" SIMPLENAME="~TProjectPhaseFEndD FEndD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FExactBeginD" ALIAS="ExactBeginD" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FExactBeginD" SIMPLENAME="~TProjectPhaseFExactBeginD FExactBeginD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FExactEndD" ALIAS="ExactEndD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FExactEndD" SIMPLENAME="~TProjectPhaseFExactEndD FExactEndD" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FDone" ALIAS="Done" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FActive" ALIAS="Active" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FDepreciated" ALIAS="Depreciated" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="I2" CONDITION="1" />

      <EDIT NAME="ProjectK" ALIAS="ProjectK" TYPE="I4" />
      <EDIT NAME="UserK" ALIAS="User" TYPE="I4">
         <LOOKUP CACHE="user.edit">SELECT UserK, FDisplayName + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="CustomerContactK" ALIAS="Contact" TYPE="INT">
         <LOOKUP>SELECT CustomerContactK, COALESCE(_cc.FNickname, _cc.FFirstName) FROM $OTCustomerContact _cc WHERE _cc.CustomerK = {=ProjectK}</LOOKUP>
      </EDIT>
      <EDIT NAME="CreateD" ALIAS="CreateD" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="UpdateD" TYPE="DATE" />
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="500" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="projectphase.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=280 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="projectphase.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=281 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="PriorityC" ALIAS="Priority" TYPE="I4">
         <LOOKUP CACHE="projectphase.priority.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=282 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="LevelC" ALIAS="Level" TYPE="I4">
         <LOOKUP CACHE="projectphase.level.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=283 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="ProgressC" ALIAS="Progress" TYPE="I4">
         <LOOKUP CACHE="projectphase.progress.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=284 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FBeginD" ALIAS="BeginD" TYPE="DATE" />
      <EDIT NAME="FEndD" ALIAS="EndD" TYPE="DATE" />
      <EDIT NAME="FExactBeginD" ALIAS="ExactBeginD" TYPE="DATE" />
      <EDIT NAME="FExactEndD" ALIAS="ExactEndD" TYPE="DATE" />
      <EDIT NAME="FDone" ALIAS="Done" TYPE="I2" />
      <EDIT NAME="FActive" ALIAS="Active" TYPE="I2" />
      <EDIT NAME="FDepreciated" ALIAS="Depreciated" TYPE="I2" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="I2" />
   </TABLETEMPLATE>

   <TABLETEMPLATE ID="application.property">
      <FIELD NAME="PropertyK" ALIAS="Property" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="Parent" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="PropertyNameK" ALIAS="Property name" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT FName FROM $OTPropertyName WHERE PropertyNameK=$T.$F)</EXPRESSION>
         <LOOKUP>SELECT PropertyNameK,FName FROM $OTPropertyName ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FKey" ALIAS="Key" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FValue" ALIAS="Value" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FValueText" ALIAS="Value text" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FValueInteger" ALIAS="Value integer" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FValueDate" ALIAS="Value date" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FValueDate" SIMPLENAME="Value date" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FValueDecimal" ALIAS="Value decimal" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FIndex" ALIAS="Index" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FValid" ALIAS="Valid" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FSystem" ALIAS="System" TYPE="BOOLEAN" CONDITION="1" />

      <EDIT NAME="ParentK" ALIAS="Parent" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" REQUIRED="1" />
      <EDIT NAME="PropertyNameK" ALIAS="Property name" TYPE="I4" />
      <EDIT NAME="FKey" ALIAS="Key" TYPE="STR" MAX="100" />
      <EDIT NAME="FValue" ALIAS="Value" TYPE="STR" MAX="1000" />
      <EDIT NAME="FValueText" ALIAS="Value text" TYPE="STR" MAX="1000" />
      <EDIT NAME="FValueInteger" ALIAS="Value integer" TYPE="I4" />
      <EDIT NAME="FValueDate" ALIAS="Value date" TYPE="DATE" />
      <EDIT NAME="FValueDecimal" ALIAS="Value decimal" TYPE="R8" />
      <EDIT NAME="FIndex" ALIAS="Index" TYPE="I4" />
      <EDIT NAME="FValid" ALIAS="Valid" TYPE="I4" />
      <EDIT NAME="FSystem" ALIAS="System" TYPE="BOOLEAN" />
   </TABLETEMPLATE>

   <TABLETEMPLATE ID="application.propertyname">
      <FIELD NAME="PropertyNameK" ALIAS="PropertyNameK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD ID="Name.table_number" NAME="table_number" ALIAS="table_name" DISPLAYTYPE="STR" TYPE="I4" CONDITION="expression">
         <EXPRESSION>(SELECT _tn.name FROM $Otable_number _tn WHERE _tn.number=$T.table_number)</EXPRESSION>
         <LOOKUP CACHE="table_number">SELECT number, name FROM $Otable_number ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FTag" ALIAS="Tag" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FValid" ALIAS="Valid" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FMultiple" ALIAS="Multiple" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>

      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" REQUIRED="1">
         <LOOKUP CACHE="table_number">SELECT number, name FROM $Otable_number ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT ID="Name.table_number" NAME="table_number" ALIAS="table_number" TYPE="I4" REQUIRED="1">
         <LOOKUP CACHE="table_number">SELECT number, name FROM $Otable_number ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="100" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FTag" ALIAS="Tag" TYPE="STR" MAX="100" />
      <EDIT NAME="FValid" ALIAS="Valid" TYPE="I4" />
      <EDIT NAME="FMultiple" ALIAS="Multiple" TYPE="BOOLEAN">
         <LOOKUP CACHE="yes_no"/>
      </EDIT>
   </TABLETEMPLATE>

   <TABLETEMPLATE ID="application.sale">
      <TRIGGER POST="U">UPDATE $OTSale SET UpdateD = GETDATE() WHERE SaleK=${@[$T]SaleK}</TRIGGER>
      <FIELD NAME="GlobalK" ALIAS="Global" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CustomerK" ALIAS="Customer" TYPE="I4" CONDITION="1" />
      <FIELD NAME="SystemK" ALIAS="System" TYPE="I4" CONDITION="1" />
      <FIELD NAME="SuperK" ALIAS="Super" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="Parent" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TSaleCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOMERGE="1" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TSaleUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOMERGE="1" NOVALUE="1">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="StateS" ALIAS="StateS" TYPE="I4" CONDITION="1" />
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="sale.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=70 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="sale.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=71 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="AreaC" ALIAS="Area" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="activity.area">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=63 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="ProbabilityC" ALIAS="Probability" TYPE="I4"  DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="sale.probability">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=72 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="SourceC" ALIAS="Source" TYPE="I4"  DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="sale.source">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=73 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="ReasonC" ALIAS="Reason" TYPE="I4"  DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="sale.reason">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=74 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StalledC" ALIAS="Stalled" TYPE="I4"  DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="sale.stalled">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=75 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FInvoice" ALIAS="Invoice" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FAmount" ALIAS="Amount" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FEarning" ALIAS="Earning" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FQuantity" ALIAS="Quantity" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FBeginD" ALIAS="Begin" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FBeginD" SIMPLENAME="~TSaleFBegin Begin" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOMERGE="1" NOVALUE="1" DESCRIPTION="Start time for sale">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FEndD" ALIAS="End" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FEndD" SIMPLENAME="~TSystemRequestFEnd FEnd" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOMERGE="1" NOVALUE="1" DESCRIPTION="End time for sale">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FOrderD" ALIAS="OrderDate" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FOrderD" SIMPLENAME="~TSaleFOrderDate FOrderDate" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOMERGE="1" NOVALUE="1" DESCRIPTION="When ordered">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FDeliverD" ALIAS="Deliver" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FDeliverD" SIMPLENAME="Deliver" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}" NOMERGE="1" NOVALUE="1" DESCRIPTION="When delivered">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FPayD" ALIAS="Pay" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FPayD" SIMPLENAME="~TSaleFPayD Pay" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FDone" ALIAS="Done" TYPE="BOOLEAN" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1" />

      <EDIT NAME="CustomerK" ALIAS="CustomerK" TYPE="I4" />
      <EDIT NAME="SystemK" ALIAS="SystemK" TYPE="I4" />
      <EDIT NAME="SuperK" ALIAS="SuperK" TYPE="I4" />
      <EDIT NAME="ParentK" ALIAS="ParentK" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="UserK" ALIAS="User" TYPE="I4">
         <LOOKUP CACHE="user.edit">SELECT UserK, FDisplayName + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="StateS" ALIAS="StateS" TYPE="I4" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="sale.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=70 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="sale.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=71 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="AreaC" ALIAS="Area" TYPE="I4" />
      <EDIT NAME="ProbabilityC" ALIAS="Probability" TYPE="I4" />
      <EDIT NAME="SourceC" ALIAS="Source" TYPE="I4" />
      <EDIT NAME="ReasonC" ALIAS="Reason" TYPE="I4" />
      <EDIT NAME="StalledC" ALIAS="Stalled" TYPE="I4" />
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="500" />
      <EDIT NAME="FInvoice" ALIAS="Invoice" TYPE="STR" MAX="100" />
      <EDIT NAME="FAmount" ALIAS="Amount" TYPE="R8" />
      <EDIT NAME="FEarning" ALIAS="Earning" TYPE="R8" />
      <EDIT NAME="FQuantity" ALIAS="Quantity" TYPE="I4" />
      <EDIT NAME="FOrderD" ALIAS="Order date" TYPE="DATE" />
      <EDIT NAME="FDeliverD" ALIAS="Deliver" TYPE="DATE" />
      <EDIT NAME="FBeginD" ALIAS="Begin" TYPE="DATE" />
      <EDIT NAME="FEndD" ALIAS="End" TYPE="DATE" />
      <EDIT NAME="FPayD" ALIAS="Pay" TYPE="DATE" />
      <EDIT NAME="FDone" ALIAS="Done" TYPE="BOOLEAN" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" />
   </TABLETEMPLATE>

   <TABLETEMPLATE ID="application.saleservice">
      <FIELD NAME="SaleK" ALIAS="SaleK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CustomerK" ALIAS="Customer" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT FName FROM $OTCustomer c WHERE c.CustomerK=$T.CustomerK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="ActivityK" ALIAS="Activity" TYPE="I4" CONDITION="1" />
      <FIELD ID="ActivityK-Name" NAME="ActivityK" ALIAS="Activity" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT LEFT( _a.FDescription, 25 ) FROM $OTActivity _a WHERE _a.ActivityK=$T.ActivityK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>

      <FIELD NAME="CreateD" ALIAS="CreateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TSaleServiceCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="UpdateD" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TSaleServiceUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="saleservice.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=180 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="RateC" ALIAS="Rate" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.RateC)</EXPRESSION>
         <LOOKUP CACHE="saleservice.rate">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=181 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FUnitPrice" ALIAS="Unit price" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FAmount" ALIAS="Amount" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FTimeSpent" ALIAS="Time spent" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FTimeCharge" ALIAS="Time charge" TYPE="R8" CONDITION="1" />
      <FIELD NAME="FBeginD" ALIAS="Begin" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FBeginD" SIMPLENAME="~TSaleServiceFBeginD Begin" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FEndD" ALIAS="End" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FEndD" SIMPLENAME="~TSaleServiceFEndD End" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" DISPLAY="0" />

      <EDIT NAME="SaleK" ALIAS="Sale" TYPE="I4" />
      <EDIT NAME="CustomerK" ALIAS="Customer" TYPE="I4" />
      <EDIT NAME="ActivityK" ALIAS="Activity" TYPE="I4" />
      <EDIT ID="ActivityK-Name" NAME="ActivityK" ALIAS="Activity" TYPE="I4" INTELLISENSE="saleservice_activityname" />
      <EDIT NAME="UserK" ALIAS="User" TYPE="I4">
         <LOOKUP CACHE="user.edit">SELECT UserK, FDisplayName + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="saleservice.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=180 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="RateC" ALIAS="Rate" TYPE="I4">
         <LOOKUP CACHE="saleservice.rate.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=181 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FUnitPrice" ALIAS="Unit price" TYPE="R8" />
      <EDIT NAME="FAmount" ALIAS="Amount" TYPE="R8" />
      <EDIT NAME="FTimeSpent" ALIAS="Time spent" TYPE="R8" />
      <EDIT NAME="FTimeCharge" ALIAS="Time charge" TYPE="R8" />
      <EDIT NAME="FBeginD" ALIAS="Begin" TYPE="DATE" />
      <EDIT NAME="FEndD" ALIAS="End" TYPE="DATE" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
   </TABLETEMPLATE>


<!-- System table. Place the systems that you need to manage information about in this table -->
   <TABLETEMPLATE ID="application.system">
      <WHERE VERSION="2" PARSE="1">(SELECT COUNT(*) FROM $OTProperty _p WHERE _p.ParentK= $T.SystemK AND _p.table_number=1010 AND _p.PropertyNameK=3) = 0</WHERE>
      <TRIGGER POST="U">UPDATE $OTSystem SET UpdateD = GETDATE() WHERE SystemK=${@[$T]SystemK}</TRIGGER>

      <FIELD ID="ID" NAME="SystemK" ALIAS="ID" TYPE="I4" CONDITION="1" />
      <FIELD NAME="GlobalK" ALIAS="Global" TYPE="I4" CONDITION="1" />
      <FIELD ID="SuperK-Name" NAME="SuperK" ALIAS="Parent name" TYPE="I4" DISPLAYTYPE="STR">
         <EXPRESSION>(SELECT _s.FName FROM $O{APP}TSystem _s WHERE _s.SystemK=$T.SuperK)</EXPRESSION>
      </FIELD>
      <CONDITION ID="SuperK-Name" NAME="SuperK" SIMPLENAME="Parent system" TYPE="STR" NOMERGE="1" NOVALUE="1">
         <EXPRESSION>$T.SuperK IN (SELECT _s.SystemK FROM $O{APP}TSystem _s WHERE _s.FName $_condition)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="SuperK" ALIAS="Parent" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TSystemCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TSystemUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="system.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=10 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.StateC)</EXPRESSION>
         <LOOKUP CACHE="system.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=11 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="PriorityC" ALIAS="Priority" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.PriorityC)</EXPRESSION>
         <LOOKUP CACHE="system.priority">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=12 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD ID="FName-Lookup" NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" INTELLISENSE="system_name" />
      <FIELD ID="FName-Indent" NAME="FName" ALIAS="Indented Name" CONDITION="1" TYPE="STR" DESCRIPTION="Indent name based on level in system tree if it belongs to any">
         <FORMULA TYPE="HTML" />
         <EXPRESSION>
('&lt;span style="margin-left:' + CAST( ISNULL( (SELECT TOP 1 _t.FDepth FROM $Othread _t WHERE _t.FKey=$T.SystemK AND _t."table_number" = 1010), 0 ) AS VARCHAR(10)) + 'em;"&gt;' + $T.FName + '&lt;/span&gt;')
         </EXPRESSION>
      </FIELD>
      <FIELD NAME="FAbbreviation" ALIAS="Abbreviation" TYPE="STR" CONDITION="1" />
      <FIELD ID="ShortName" NAME="FAbbreviation" ALIAS="Abbreviation" TYPE="STR" CONDITION="expression">
         <EXPRESSION>CASE WHEN $T.FAbbreviation IS NOT NULL THEN $T.FAbbreviation ELSE $T.FName END</EXPRESSION>
      </FIELD>
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD ID="Note" NAME="FDescription" ALIAS="Note" TYPE="STR" CONDITION="expression">
         <EXPRESSION>(SELECT TOP 1 _n.FNote FROM $OTNote _n WHERE _n.RecordK=$T.SystemK AND _n."table_number" = 1010)</EXPRESSION>
      </FIELD>
      <FIELD NAME="FIdle" ALIAS="Idle" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>

      <FIELD ID="Path" NAME="SystemK" ALIAS="Path" TYPE="STR" DESCRIPTION="View path for current system in tree">
         <EXPRESSION>(SELECT TOP 1 _t.FPath FROM $Othread _t WHERE _t.FKey=$T.SystemK AND _t."table_number" = 1010)</EXPRESSION>
      </FIELD>
      <FIELD ID="Depth" NAME="SystemK" ALIAS="Depth" TYPE="STR" CONDITION="expression" DESCRIPTION="The depth in tree system is located at">
         <EXPRESSION>(SELECT TOP 1 _t.FDepth FROM $Othread _t WHERE _t.FKey=$T.SystemK AND _t."table_number" = 1010)</EXPRESSION>
      </FIELD>
      <FIELD ID="ThreadNumber" NAME="SystemK" ALIAS="Thread ID" TYPE="INT" CONDITION="expression" DESCRIPTION="The thread number, same as key to system root">
         <EXPRESSION>(SELECT TOP 1 _th.FThreadId FROM $Othread_header _th JOIN $Othread _t ON _th.FThreadId = _t.FThreadId WHERE _t.FKey=$T.SystemK AND _t."table_number" = 1010)</EXPRESSION>
      </FIELD>
      <FIELD ID="ThreadName" NAME="SystemK" ALIAS="Thread Name" TYPE="STR" CONDITION="expression" INTELLISENSE="system_thread_name" DESCRIPTION="The thread name, same as code name to root system">
         <EXPRESSION>(SELECT TOP 1 _s.FName FROM $OTSystem _s JOIN $Othread_header _th ON _s.SystemK = _th.FThreadId AND _th."table_number" = 1010 JOIN $Othread _t ON _th.FThreadId = _t.FThreadId AND _t."table_number" = 1010 WHERE _t.FKey=$T.SystemK)</EXPRESSION>
      </FIELD>
      <FIELD ID="ThreadShortName" NAME="SystemK" ALIAS="Thread Name" TYPE="STR" CONDITION="expression" DESCRIPTION="The abbreviated name for thread">
         <EXPRESSION>(SELECT TOP 1 CASE WHEN _s.FAbbreviation IS NOT NULL THEN _s.FAbbreviation ELSE _s.FName END FROM $OTSystem _s JOIN $Othread_header _th ON _s.SystemK = _th.FThreadId AND _th."table_number" = 1010 JOIN $Othread _t ON _th.FThreadId = _t.FThreadId AND _t."table_number" = 1010 WHERE _t.FKey=$T.SystemK)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountRequest" NAME="SystemK" ALIAS="Count req." SIMPLENAME="Number of requests" TYPE="INT" CONDITION="expression" CONDITIONGROUP="request.conditions" REPLACE="?">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTSystemRequest _sr WHERE _sr.SystemK = $T.SystemK ?)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountProject" NAME="SystemK" ALIAS="Count prj." SIMPLENAME="Number of projects" TYPE="INT" CONDITION="expression" CONDITIONGROUP="project.conditions" REPLACE="?">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTProject _p WHERE _p.ParentK = $T.SystemK AND _p.table_number = 1010 ?)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountArticle" NAME="SystemK" ALIAS="Count art." SIMPLENAME="Number of articles" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTArticle _a WHERE _a.ParentK = $T.SystemK AND _a.table_number = 1010)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountBooks" NAME="SystemK" ALIAS="Count books" SIMPLENAME="Number of books" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTArticleBook _ab WHERE _ab.ParentK = $T.SystemK AND _ab.table_number = 1010)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountActivity" NAME="SystemK" ALIAS="Count act." SIMPLENAME="Number of activities" TYPE="INT" CONDITION="expression" CONDITIONGROUP="activity.conditions" REPLACE="?">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTActivity _a WHERE _a.ParentK = $T.SystemK AND _a.table_number = 1010 ?)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountVersion" NAME="SystemK" ALIAS="Count version" SIMPLENAME="Number of versions" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTSystemVersion _sa WHERE _sa.SystemK = $T.SystemK)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountTodo" NAME="SystemK" ALIAS="Count todo" SIMPLENAME="Number of todos" TYPE="INT" CONDITION="expression" CONDITIONGROUP="todo.conditions" REPLACE="?">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTTodo _t JOIN $OTTodoList _tl ON _t.TodoListK = _tl.TodoListK WHERE _tl.ParentK = $T.SystemK AND _tl.table_number = 1010 ?)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountTodoListAndTodo" NAME="CustomerK" ALIAS="Count todo" SIMPLENAME="Lists and todo count" TYPE="INT" CONDITION="expression" CONDITIONGROUP="todo.conditions" REPLACE="?">
         <EXPRESSION>CONCAT(
(SELECT COUNT(*) FROM $OTTodoList _tl WHERE _tl.ParentK = $T.SystemK AND _tl.table_number = 1010 AND _tl.FReady=0 AND _tl.FDeleted=0)
,' : '
,(SELECT COUNT(*) FROM $OTTodo _t JOIN $OTTodoList _tl ON _t.TodoListK = _tl.TodoListK WHERE _tl.ParentK = $T.SystemK AND _tl.table_number = 1010 ?) )
         </EXPRESSION>
      </FIELD>
      <FIELD ID="CountProperty" NAME="SystemK" ALIAS="Count property" SIMPLENAME="Number of property" TYPE="INT" CONDITION="expression" CONDITIONGROUP="property.conditions" REPLACE="?">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTProperty _p WHERE _p.ParentK = $T.SystemK AND _p.table_number = 1010 ?)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountThreadItems" NAME="SystemK" ALIAS="Thread nr.cnt." SIMPLENAME="Number of systems in thread" TYPE="INT" CONDITION="expression" DESCRIPTION="Count number of records in thread row belongs to if it is in a thread">
         <EXPRESSION>(SELECT COUNT(*) FROM $Othread _t WHERE _t.table_number = 1010 AND _t.FThreadId = (SELECT _t1.FThreadId FROM $Othread _t1 WHERE _t1.FKey = $T.SystemK AND _t1.table_number = 1010))</EXPRESSION>
      </FIELD>
      <FIELD ID="IsRoot" NAME="SystemK" ALIAS="Is root" SIMPLENAME="Is system root" TYPE="INT" CONDITION="expression" DESCRIPTION="Find root systems">
         <EXPRESSION>(CASE WHEN (SELECT COUNT(*) FROM $Othread_header _th WHERE _th.FThreadId=$T.SystemK AND _th.table_number = 1010) = 0 THEN 0 ELSE 1 END)</EXPRESSION>
      </FIELD>
      <FIELD ID="CountNodes" NAME="SystemK" ALIAS="Node count" SIMPLENAME="System node count" TYPE="INT" CONDITION="expression" DESCRIPTION="Count number of nodes in thread">
         <EXPRESSION>(SELECT COUNT(*) FROM $Othread _t JOIN $Othread_header _th ON _t.FThreadId = _th.FThreadId WHERE _th.FThreadId=$T.SystemK AND _th.table_number = 1010)</EXPRESSION>
      </FIELD>
      <FIELD ID="Hashtag.SystemK" NAME="SystemK" ALIAS="Hashtag" TYPE="STR" ALIGN="L" FF="v" CONDITION="expression">
         <EXPRESSION>CAST( STUFF( (SELECT ' ' + _tn.FName FROM $OTTag _t JOIN $OTTagName _tn ON _tn.TagNameK= _t.TagNameK AND _t.table_number=1010 WHERE _t.ParentK=$T.SystemK ORDER BY 1 FOR XML PATH(''))  ,1,1,'' ) AS NVARCHAR(MAX))</EXPRESSION>
      </FIELD>
      <CONDITION ID="SystemK-RequestNotDone" NAME="SystemK" SIMPLENAME="Requests not closed" TYPE="INT" DESCRIPTION="List with systems that has requets that is not closed">
         <LOOKUP>SELECT _s.SystemK, _s.FName + ' : ' + CAST( (SELECT COUNT(*) FROM $OTSystemRequest _st WHERE _st.FDone = 0 AND _st.SystemK=_s.SystemK) AS NVARCHAR(5)) FROM $OTSystem _s WHERE (SELECT COUNT(*) FROM $OTSystemRequest _st WHERE _st.FDone = 0 AND _st.SystemK=_s.SystemK) &gt; 0 ORDER BY _s.FName</LOOKUP>
      </CONDITION>
      
      <FIELD ID="Hashtag" NAME="SystemK" ALIAS="Hashtag" TYPE="STR" DESCRIPTION="Hastags connected to system">
         <EXPRESSION>
CAST( 
STUFF( 
   (SELECT ',' + _b.FName FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _r.ParentK=$T.SystemK AND _r.table_number=1010),
   1,1,'' )
   AS NVARCHAR(512)
)
         </EXPRESSION>
      </FIELD>
      <CONDITION ID="Hashtag" NAME="SystemK" SIMPLENAME="Hashtag" TYPE="STR" NOVALUE="1" INTELLISENSE="hashtag_name_system">
         <EXPRESSION>
$T.$F $_operator (SELECT _r.ParentK FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _b.FName $_condition AND _r.table_number=1010)
         </EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      
      <EDIT NAME="SuperK" ALIAS="Super" TYPE="INT" />
      <EDIT NAME="UserK" ALIAS="User" TYPE="I4">
         <LOOKUP CACHE="user.edit">SELECT UserK, FDisplayName + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="CreateD" ALIAS="CreateD" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="system.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=10 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="system.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=11 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="PriorityC" ALIAS="Priority" TYPE="I4">
         <LOOKUP CACHE="system.priority.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=12 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="100" />
      <EDIT NAME="FAbbreviation" ALIAS="Abbreviation" TYPE="STR" MAX="100" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FIdle" ALIAS="Idle" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
   </TABLETEMPLATE>
   
    <TABLETEMPLATE ID="application.systemintent">
      <FIELD NAME="SystemK" ALIAS="System" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1" />
      <FIELD NAME="SuperK" ALIAS="Super" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TSystemIntentCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TSystemIntentUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="systemintent.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=190 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.StateC)</EXPRESSION>
         <LOOKUP CACHE="systemintent.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=191 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="DifficultyC" ALIAS="Difficulty" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.DifficultyC)</EXPRESSION>
         <LOOKUP CACHE="systemintent.difficulty">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=192 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="PriorityC" ALIAS="Priority" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.PriorityC)</EXPRESSION>
         <LOOKUP CACHE="systemintent.priority">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=193 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FBrief" ALIAS="Brief" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FWriter" ALIAS="Writer" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FText" ALIAS="Text" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FComment" ALIAS="Comment" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FBegin" ALIAS="Begin" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FBegin" SIMPLENAME="~TSystemIntentFBegin Begin" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FEnd" ALIAS="End" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( [$T].[$F] AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FEnd" SIMPLENAME="~TSystemIntentFEnd End" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST([$T].[$F] AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FDone" ALIAS="Done" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="I2" CONDITION="1" />
       
      <FIELD ID="Hashtag" NAME="SystemIntentK" ALIAS="Hashtag" TYPE="STR" DESCRIPTION="Hastags connected to system">
         <EXPRESSION>
CAST( 
STUFF( 
   (SELECT ',' + _b.FName FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _r.ParentK=$T.SystemIntentK AND _r.table_number=1260),
   1,1,'' )
   AS NVARCHAR(512)
)
         </EXPRESSION>
      </FIELD>
      <CONDITION ID="Hashtag" NAME="SystemIntentK" SIMPLENAME="Hashtag" TYPE="STR" NOVALUE="1" INTELLISENSE="hashtag_name">
         <EXPRESSION>
$T.$F $_operator (SELECT _r.ParentK FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _b.FName $_condition AND _r.table_number=1260)
         </EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
       

      <EDIT NAME="SystemK" ALIAS="SystemK" TYPE="I4" NULL="0" DEFAULT="0" />
      <EDIT NAME="UserK" ALIAS="UserK" TYPE="I4" />
      <EDIT NAME="SuperK" ALIAS="SuperK" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="CreateD" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="UpdateD" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="TypC" TYPE="I4">
         <LOOKUP CACHE="systemintent.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=190 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="systemintent.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=191 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="DifficultyC" ALIAS="Difficulty" TYPE="I4">
         <LOOKUP CACHE="systemintent.difficulty.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=192 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="PriorityC" ALIAS="Priority" TYPE="I4">
         <LOOKUP CACHE="systemintent.priority.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=193 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FBrief" ALIAS="Brief" TYPE="STR" MAX="200" />
      <EDIT NAME="FWriter" ALIAS="Writer" TYPE="STR" MAX="200" />
      <EDIT NAME="FText" ALIAS="Text" TYPE="STR" />
      <EDIT NAME="FComment" ALIAS="Comment" TYPE="STR" MAX="1000" />
      <EDIT NAME="FBegin" ALIAS="Begin" TYPE="DATE" />
      <EDIT NAME="FEnd" ALIAS="End" TYPE="DATE" />
      <EDIT NAME="FDone" ALIAS="Done" TYPE="I2" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="I2" />
   </TABLETEMPLATE>
   


   <TABLETEMPLATE ID="application.systemrequest">
      <TRIGGER POST="U">UPDATE $OTSystemRequest SET UpdateD = GETDATE() WHERE SystemRequestK=${@[$T]SystemRequestK}</TRIGGER>
      <FIELD NAME="SystemK" ALIAS="System" TYPE="I4" CONDITION="1" INTELLISENSE="system_key">
         <EXPRESSION>(SELECT _s.FName FROM $OTSystem _s WHERE _s.SystemK=$T.SystemK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="ContactK" ALIAS="Contact" TYPE="I4" CONDITION="1" />
      <FIELD NAME="SuperK" ALIAS="Super" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TSystemRequestCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TSystemRequestUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="systemrequest.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=110 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.StateC)</EXPRESSION>
         <LOOKUP CACHE="systemrequest.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=111 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="DifficultyC" ALIAS="Difficulty" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.DifficultyC)</EXPRESSION>
         <LOOKUP CACHE="systemrequest.difficulty">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=112 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="PriorityC" ALIAS="Priority" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.PriorityC)</EXPRESSION>
         <LOOKUP CACHE="systemrequest.priority">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=113 AND FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="ContextC" ALIAS="Context" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="systemrequest.context">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=114 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FBrief" ALIAS="Brief" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FWriter" ALIAS="Writer" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FText" ALIAS="Text" TYPE="STR" CONDITION="1" BO="1" />
      <FIELD NAME="FComment" ALIAS="Comment" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FBegin" ALIAS="Begin" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CASE WHEN $T.FBegin IS NOT NULL THEN CAST( $T.$F AS float ) ELSE NULL END</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FBegin" SIMPLENAME="~TSystemRequestFBegin FBegin" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FEnd" ALIAS="End" TYPE="ODATE">
         <FORMULA CODE="GD1">iif((@this &gt; 0);date.datetimetext(float(@this) + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FEnd" SIMPLENAME="~TSystemRequestFEnd FEnd" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FDone" ALIAS="Completed" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FDoneD" ALIAS="Done at" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CASE WHEN $T.FDoneD IS NOT NULL THEN CAST( $T.$F AS float ) ELSE NULL END</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FDoneD" SIMPLENAME="~TSystemRequestFDoneAt FDone at" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FWaiting" ALIAS="Waiting" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      
      <FIELD ID="Hashtag" NAME="SystemRequestK" ALIAS="Hashtag" TYPE="STR" DESCRIPTION="Hastags connected to system">
         <EXPRESSION>
CAST( 
STUFF( 
   (SELECT ',' + _b.FName FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _r.ParentK=$T.SystemRequestK AND _r.table_number=1150),
   1,1,'' )
   AS NVARCHAR(512)
)
         </EXPRESSION>
      </FIELD>
      <CONDITION ID="Hashtag" NAME="SystemRequestK" SIMPLENAME="Hashtag" TYPE="STR" NOVALUE="1" INTELLISENSE="hashtag_name">
         <EXPRESSION>
$T.$F $_operator (SELECT _r.ParentK FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _b.FName $_condition AND _r.table_number=1150)
         </EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
      
      <FIELD ID="Picture" NAME="FComment" ALIAS="Picture" TYPE="BIN">
         <EXPRESSION>(SELECT TOP 1 'data:image/png;base64,' + CAST(N'' as xml).value('xs:base64Binary(xs:hexBinary(sql:column("_i.FData")))', 'VARCHAR(max)') FROM $OTImage _i WHERE _i.RecordK=$T.SystemRequestK AND _i.table_number=1150)</EXPRESSION>
         <EXPRESSION OUTPUT="edit">(SELECT TOP 1 _i.FName FROM $OTImage _i WHERE _i.RecordK=$T.SystemRequestK AND _i.table_number=1150)</EXPRESSION>
      </FIELD>
      
      <FIELD ID="CountActivity" NAME="SystemK" ALIAS="Count act." SIMPLENAME="Number of activities" TYPE="INT" CONDITION="expression" CONDITIONGROUP="activity.conditions" REPLACE="?" DESCRIPTION="Count number of activities connected to request">
         <EXPRESSION>(SELECT COUNT(*) FROM $OTActivity _a JOIN $OTrSystemRequestXActivity _r ON _a.ActivityK = _r.ActivityK WHERE _r.SystemRequestK = $T.SystemRequestK ?)</EXPRESSION>
      </FIELD>
      <EDIT NAME="UserK" ALIAS="User" TYPE="I4" />
      <EDIT NAME="ContactK" ALIAS="Contact" TYPE="I4" />
      <EDIT NAME="SuperK" ALIAS="Super" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="systemrequest.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=110 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="systemrequest.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=111 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="DifficultyC" ALIAS="Difficulty" TYPE="I4">
         <LOOKUP CACHE="systemrequest.difficulty.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=112 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="PriorityC" ALIAS="Priority" TYPE="I4">
         <LOOKUP CACHE="systemrequest.priority.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=113 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="ContextC" ALIAS="Context" TYPE="I4">
         <LOOKUP CACHE="systemrequest.context.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=114 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FBrief" ALIAS="Brief" TYPE="STR" MAX="200" />
      <EDIT NAME="FWriter" ALIAS="Writer" TYPE="STR" MAX="200" />
      <EDIT NAME="FText" ALIAS="Text" TYPE="STR" />
      <EDIT NAME="FComment" ALIAS="Comment" TYPE="STR" MAX="1000" />
      <EDIT NAME="FBegin" ALIAS="Begin" TYPE="DATE" />
      <EDIT NAME="FEnd" ALIAS="End" TYPE="DATE" />
      <EDIT NAME="FDone" ALIAS="Done" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FWaiting" ALIAS="Waiting" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
   </TABLETEMPLATE>

   <TABLETEMPLATE ID="application.systemversion">
      <FIELD ID="ID" NAME="SystemVersionK" ALIAS="ID" TYPE="I4" CONDITION="1" />
      <FIELD ID="Name.SystemK" NAME="SystemK" ALIAS="System name" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1" INTELLISENSE="system_key">
         <EXPRESSION>(SELECT _s.FName FROM $OTSystem _s WHERE _s.SystemK=$T.SystemK)</EXPRESSION>
      </FIELD>

      <FIELD ID="NameList.SystemK" NAME="SystemK" ALIAS="System name" TYPE="STR">
         <EXPRESSION>(SELECT _s.FName FROM $OTSystem _s WHERE _s.SystemK=$T.SystemK)</EXPRESSION>
      </FIELD>
      <CONDITION ID="NameList.SystemK" NAME="SystemK" SIMPLENAME="System name" TYPE="INT">
         <LOOKUP CACHE="systemversion.systems">SELECT DISTINCT _s.SystemK, _s.FName FROM $OTSystem _s JOIN $OTSystemVersion _sv ON _s.SystemK=_sv.SystemK WHERE _s.FDeleted=0 ORDER BY 2</LOOKUP>
      </CONDITION>
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TSystemVersionCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TSystemVersionUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="OverallCounter" ALIAS="Overall counter" TYPE="INT" CONDITION="1" DESCRIPTION="Cointer for all versions regardless system" />
      <FIELD NAME="SystemCounter" ALIAS="System counter" TYPE="INT" CONDITION="1" DESCRIPTION="Cointer for versions on one specific system" />
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="systemversion.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=20 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.StateC)</EXPRESSION>
         <LOOKUP CACHE="systemversion.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=21 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FReleaseDate" ALIAS="Release date" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FReleaseDate" SIMPLENAME="~TSystemVersionFReleaseDate Release date" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FReleasedDate" ALIAS="Released date" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FReleasedDate" SIMPLENAME="~TSystemVersionFReleasedDate Released date" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FVersion1" ALIAS="Version major" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FVersion2" ALIAS="Version minor" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FVersion3" ALIAS="Version patch" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FBuild" ALIAS="Build" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FIndex" ALIAS="Index" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FNameInternal" ALIAS="Name internal" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FSearchName" ALIAS="Search name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FTested" ALIAS="Tested" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FReleased" ALIAS="Released" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FTrailing" ALIAS="Trailing" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>

      <EDIT NAME="UserK" ALIAS="User" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="OverallCounter" ALIAS="Overall counter" TYPE="I4" />
      <EDIT NAME="SystemCounter" ALIAS="System counter" TYPE="I4" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="systemversion.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=20 AND FDeleted=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="systemversion.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=21 AND FDeleted=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FReleaseDate" ALIAS="Release date" TYPE="DATE" />
      <EDIT NAME="FReleasedDate" ALIAS="Released date" TYPE="DATE" />
      <EDIT NAME="FVersion1" ALIAS="Version major" TYPE="I4" />
      <EDIT NAME="FVersion2" ALIAS="Version minor" TYPE="I4" />
      <EDIT NAME="FVersion3" ALIAS="Version patch" TYPE="I4" />
      <EDIT NAME="FBuild" ALIAS="Build" TYPE="I4" />
      <EDIT NAME="FIndex" ALIAS="Index" TYPE="I4" />
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="200" />
      <EDIT NAME="FSearchName" ALIAS="Search name" TYPE="STR" MAX="200" />
      <EDIT NAME="FNameInternal" ALIAS="Name internal" TYPE="STR" MAX="200" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FTested" ALIAS="Tested" TYPE="BOOLEAN">
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FReleased" ALIAS="Released" TYPE="BOOLEAN">
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN">
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FTrailing" ALIAS="Trailing" TYPE="BOOLEAN">
         <LOOKUP CACHE="yes_no" />
      </EDIT>
   </TABLETEMPLATE>

   <TABLETEMPLATE ID="application.tag">
      <FIELD NAME="TagK" ALIAS="Tag" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="Parent" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="TagNameK" ALIAS="Tag name" TYPE="I4" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FDate" ALIAS="Date" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FDate" SIMPLENAME="Date" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>

      <EDIT NAME="ParentK" ALIAS="Parent" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" REQUIRED="1" />
      <EDIT NAME="TagNameK" ALIAS="Tag name" TYPE="I4" />
      <EDIT NAME="FDate" ALIAS="Date" TYPE="DATE" />
   </TABLETEMPLATE>


   <TABLETEMPLATE ID="application.tagname">
      <FIELD NAME="TagNameK" ALIAS="TagNameK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD ID="Name.table_number" NAME="table_number" ALIAS="table_name" DISPLAYTYPE="STR" TYPE="I4" CONDITION="expression">
         <EXPRESSION>(SELECT _tn.name FROM $Otable_number _tn WHERE _tn.number=$T.table_number)</EXPRESSION>
         <LOOKUP CACHE="table_number">SELECT number, name FROM $Otable_number ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />

      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" REQUIRED="1">
         <LOOKUP CACHE="table_number">SELECT number, name FROM $Otable_number ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT ID="Name.table_number" NAME="table_number" ALIAS="table_number" TYPE="I4" REQUIRED="1">
         <LOOKUP CACHE="table_number">SELECT number, name FROM $Otable_number ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="100" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
   </TABLETEMPLATE>

<!-- TTodo table -->
   <TABLETEMPLATE ID="application.todo">
      <FIELD ID="Id.TodoK" NAME="TodoK" ALIAS="ID" TYPE="I4" CONDITION="1" />
      <FIELD NAME="TodoListK" ALIAS="TodoListK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="UserK" ALIAS="User" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _u.FDisplayName FROM $OTUser _u WHERE _u.UserK=$T.UserK)</EXPRESSION>
         <LOOKUP CACHE="user">SELECT UserK, COALESCE(FDisplayName,FAlias,FDisplayName,'') + ' (' + ISNULL(FFirstName,'') + ' ' + ISNULL(FLastName,'') + ')' FROM $OTUser WHERE FDeleted = 0 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TTodoCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TTodoUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="todo.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=230 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="StateC" ALIAS="State" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.StateC)</EXPRESSION>
         <LOOKUP CACHE="todo.state">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=231 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FReadyD" ALIAS="Ready at" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FReadyD" SIMPLENAME="~TTodoFReadyD Ready at" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FClosedD" ALIAS="ClosedAt" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FClosedD" SIMPLENAME="~TTodoFClosedD ClosedAt" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FReady" ALIAS="Ready" TYPE="I2" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FClosed" ALIAS="Closed" TYPE="I2" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>

      <EDIT NAME="UserK" ALIAS="User" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="todo.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=230 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="StateC" ALIAS="State" TYPE="I4">
         <LOOKUP CACHE="todo.state.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=231 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="2000" />
      <EDIT NAME="FReadyD" ALIAS="Ready at" TYPE="DATE" />
      <EDIT NAME="FClosedD" ALIAS="Closed at" TYPE="DATE" />
      <EDIT NAME="FReady" ALIAS="Ready" TYPE="I2">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FClosed" ALIAS="Closed" TYPE="I2">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
   </TABLETEMPLATE>
   
   <TABLETEMPLATE ID="application.todolist">
      <FIELD ID="Id.TodoListK" NAME="TodoListK" ALIAS="TodoListK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="ParentK" ALIAS="ParentK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="table_number" ALIAS="table_number" TYPE="I4" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~TTodoListCreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~TTodoListUpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="todolist.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=220 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="ContextC" ALIAS="Context" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="todolist.context">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=221 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="I2" CONDITION="1" />
      <FIELD NAME="FReady" ALIAS="Ready" TYPE="I2" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FClosed" ALIAS="Closed" TYPE="I2" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      

      <EDIT NAME="ParentK" ALIAS="Parent" TYPE="I4" />
      <EDIT NAME="table_number" ALIAS="table_number" TYPE="I4" />
      <EDIT NAME="CreateD" ALIAS="Create" TYPE="DATE" />
      <EDIT NAME="UpdateD" ALIAS="Update" TYPE="DATE" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="todolist.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=220 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="ContextC" ALIAS="Context" TYPE="I4">
         <LOOKUP CACHE="todolist.context.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=221 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FName" ALIAS="Name" TYPE="STR" MAX="1000" />
      <EDIT NAME="FReady" ALIAS="Ready" TYPE="I2">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FClosed" ALIAS="Closed" TYPE="I2">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="I2" />
   </TABLETEMPLATE>   
   

<!-- User table -->
   <TABLETEMPLATE ID="application.user">
      <FIELD NAME="CustomerK" ALIAS="Customer" TYPE="I4" DISPLAYTYPE="STR" CONDITION="expression">
         <EXPRESSION>(SELECT FName FROM $OTCustomer c WHERE c.CustomerK=$T.CustomerK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="AuthorityS" ALIAS="AuthorityS" TYPE="I4" CONDITION="1" />
      <FIELD NAME="RoleC" ALIAS="Role" TYPE="I4" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.TypeC)</EXPRESSION>
         <LOOKUP CACHE="user.role">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=30 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FAlias" ALIAS="Alias" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FLoginName" ALIAS="Login name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDisplayName" ALIAS="Display name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD NAME="FFirstName" ALIAS="First name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FLastName" ALIAS="Last name" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FMail" ALIAS="Mail" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FMobile" ALIAS="Mobile" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FLoginD" ALIAS="Login date" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FLoginD" SIMPLENAME="~TUserFLoginD Login date" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FIdle" ALIAS="Idle" TYPE="BOOLEAN" CONDITION="1" />
      <FIELD NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN" CONDITION="1">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </FIELD>
      <FIELD NAME="FPassword" ALIAS="Password" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />

      <EDIT NAME="CustomerK" ALIAS="Customer" TYPE="I4" INTELLISENSE="customer_name_key" />
      <EDIT NAME="AuthorityS" ALIAS="AuthorityS" TYPE="I4" />
      <EDIT NAME="RoleC" ALIAS="RoleC" TYPE="I4">
         <LOOKUP CACHE="user.role">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=30 AND FDeleted=0 AND FIdle=0  ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FAlias" ALIAS="Alias" TYPE="STR" MAX="100" />
      <EDIT NAME="FLoginName" ALIAS="LoginName" TYPE="STR" MAX="100" />
      <EDIT NAME="FDisplayName" ALIAS="DisplayName" TYPE="STR" MAX="100" />
      <EDIT NAME="FFirstName" ALIAS="FirstName" TYPE="STR" MAX="100" />
      <EDIT NAME="FLastName" ALIAS="LastName" TYPE="STR" MAX="100" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FMail" ALIAS="Mail" TYPE="STR" MAX="200" />
      <EDIT NAME="FMobile" ALIAS="Mobile" TYPE="STR" MAX="100" />
      <EDIT NAME="FLoginD" ALIAS="Login" TYPE="DATE" />
      <EDIT NAME="FIdle" ALIAS="Idle" TYPE="BOOLEAN" />
      <EDIT NAME="FDeleted" ALIAS="Deleted" TYPE="BOOLEAN">
         <EXPRESSION>CASE WHEN $T.$F = 0 OR $T.$F IS NULL THEN 'NO' ELSE 'YES' END</EXPRESSION>
         <LOOKUP CACHE="yes_no" />
      </EDIT>
      <EDIT NAME="FPassword" ALIAS="Password" TYPE="STR" MAX="256" />
   </TABLETEMPLATE>


   <TABLE PREFIX="TGlobal1" NAME="TGlobal" SIMPLENAME="~TGlobal Global" DESCRIPTION="TGlobal is used as global filter to separate parts in database between users or to enable multiple companies to work against one single database">
      <FIELD NAME="GlobalK" ALIAS="ID (Global)" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.global" />
   </TABLE>

   <TABLE PREFIX="TUser1" NAME="TUser" SIMPLENAME="~TUser User" PARENT="TGlobal1">
      <JOIN TYPE="inner">"$parent"."GlobalK"="$this"."GlobalK"</JOIN>
      <FIELD NAME="UserK" ALIAS="ID (User)" TYPE="I4" CONDITION="1" KEY="1" />
      <FIELD NAME="GlobalK" ALIAS="ID (Global)" FKEY="TGlobal1" TYPE="I4" CONDITION="1" />
      <USETABLETEMPLATE ID="application.user" />
   </TABLE>

   <TABLE PREFIX="TCustomer1" NAME="TCustomer" SIMPLENAME="~TCustomer TCustomer" PARENT="TGlobal1">
      <JOIN TYPE="inner">$parent.GlobalK=$this.GlobalK</JOIN>
      <FIELD NAME="CustomerK" ALIAS="ID (Customer)" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.customer" />
   </TABLE>

   <TABLE PREFIX="TCustomerContact1" NAME="TCustomerContact" SIMPLENAME="~TCustomerContact Contact" PARENT="TCustomer1">
      <JOIN TYPE="inner">$parent.CustomerK=$this.CustomerK</JOIN>
      <FIELD NAME="CustomerContactK" ALIAS="ID (Contact)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.customercontact" />
      <COPY PREFIX="TCustomerContact2" PARENT="TrSaleXCustomerContact1" JOIN="$parent.CustomerContactK=$this.CustomerContactK" />
   </TABLE>
   
   <TABLE PREFIX="TCustomerChapter1" NAME="TCustomerChapter" SIMPLENAME="~TCustomerChapter Customer chapter" PARENT="TCustomer1">
      <JOIN TYPE="inner">$parent.CustomerK=$this.CustomerK</JOIN>
      <FIELD NAME="CustomerChapterK" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.customerchapter" />
   </TABLE>

   <TABLE PREFIX="TLink1" NAME="TLink" SIMPLENAME="~TLink Link" PARENT="TSystem1" DESCRIPTION="Handle links attached to records">
      <JOIN TYPE="inner">$parent.SystemK=$this.ParentK AND $this.table_number=1010</JOIN>
      <FIELD NAME="LinkK" ALIAS="LinkK" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.link" />
      <COPY PREFIX="TLink2" PARENT="TCustomer1" JOIN="$parent.SystemK=$this.ParentK AND $this.table_number=1030" />
      <COPY PREFIX="TLink3" PARENT="TActivity2" JOIN="$parent.SystemK=$this.ParentK AND $this.table_number=1110" />
      <COPY PREFIX="TLink4" PARENT="TSystemVersion1" JOIN="$parent.SystemK=$this.ParentK AND $this.table_number=1090" />
      <COPY PREFIX="TLink5" PARENT="TArticleBook1" JOIN="$parent.ArticleBookK=$this.ParentK AND $this.table_number=1170" />
      <COPY PREFIX="TLink6" PARENT="TArticle2" JOIN="$parent.ArticleK=$this.ParentK AND $this.table_number=1160" />
   </TABLE>

   <TABLE PREFIX="TNumber1" NAME="TNumber" ALIAS="Number" SIMPLENAME="~TNumber Number" PARENT="TCustomer1">
      <JOIN TYPE="inner">$parent.CustomerK=$this.ParentK AND $this.table_number=1030</JOIN>
      <FIELD NAME="NumberK" ALIAS="NumberK" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.number" />
      <COPY PREFIX="TNumber2" PARENT="TCustomerContact1" JOIN="$parent.CustomerContactK=$this.ParentK AND $this.table_number=1030" />
   </TABLE>

   <TABLE PREFIX="TLog1" NAME="TLog" SIMPLENAME="~TLog Log" PARENT="TSystemVersion1">
      <JOIN TYPE="inner">$parent.SystemVersionK=$this.SystemVersionK</JOIN>
      <FIELD NAME="LogK" ALIAS="ID (Log)" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.log" />
   </TABLE>

   <TABLE PREFIX="TProject1" NAME="TProject" ALIAS="TProject1" SIMPLENAME="~TProject Project" PARENT="TSystem1">
      <JOIN TYPE="inner">$parent.SystemK=$this.ParentK AND $this.table_number=1010</JOIN>
      <FIELD NAME="ProjectK" ALIAS="ID (Project)" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.project" />
      <COPY PREFIX="TProject2" PARENT="TCustomer1" JOIN="$parent.CustomerK=$this.ParentK AND $this.table_number=1030" />
   </TABLE>
   
   <TABLE PREFIX="TProjectPhase1" NAME="TProjectPhase" SIMPLENAME="~TProjectPhase Phase" PARENT="TProject1">
      <JOIN TYPE="inner">[$parent].[ProjectK]=[$this].[ProjectK]</JOIN>
      <FIELD NAME="ProjectPhaseK" ALIAS="ProjectPhaseK" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.projectphase" />
   </TABLE>

   <TABLE PREFIX="TSale1" NAME="TSale" ALIAS="TSale1" SIMPLENAME="~TSale Sales" PARENT="TCustomer1">
      <JOIN TYPE="inner">$parent.CustomerK=$this.CustomerK</JOIN>
      <FIELD NAME="SaleK" ALIAS="ID (Sale)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.sale" />
   </TABLE>

   <TABLE PREFIX="TSaleService1" NAME="TSaleService" ALIAS="TSaleService1" SIMPLENAME="~TSaleService Sale service" PARENT="TSale1">
      <JOIN TYPE="inner">$parent.SaleK=$this.SaleK</JOIN>
      <FIELD NAME="SaleServiceK" ALIAS="ID (Sale service)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.saleservice" />
   </TABLE>

   <TABLE PREFIX="TSystem1" NAME="TSystem" ALIAS="TSystem1" SIMPLENAME="~TSystem System" PARENT="TGlobal1">
      <JOIN TYPE="inner">$parent.GlobalK=$this.GlobalK</JOIN>
      <FIELD NAME="SystemK" ALIAS="ID (System)" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.system" />
   </TABLE>

   <TABLE PREFIX="TSystemIntent1" NAME="TSystemIntent" ALIAS="TSystemIntent1" SIMPLENAME="~TSystemIntent TSystemIntent" PARENT="TSystem1">
      <JOIN TYPE="inner">$parent.SystemK=$this.SystemK</JOIN>
      <FIELD NAME="SystemIntentK" ALIAS="ID (System intent)" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.systemintent" />
   </TABLE>
   
   <TABLE PREFIX="TSystemVersion1" NAME="TSystemVersion" SIMPLENAME="~TSystemVersion Versions" PARENT="TSystem1">
      <JOIN TYPE="inner">$parent.SystemK=$this.SystemK</JOIN>
      <FIELD NAME="SystemVersionK" ALIAS="ID (System version)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.systemversion" />
   </TABLE>

   <TABLE PREFIX="TSystemRequest1" NAME="TSystemRequest" ALIAS="TSystemRequest1" SIMPLENAME="~TSystemRequest Requests" PARENT="TSystem1" DESCRIPTION="Requests, issues, features etc is registered in Requests">
      <JOIN TYPE="inner">$parent.SystemK=$this.SystemK</JOIN>
      <FIELD NAME="SystemRequestK" ALIAS="ID (System request)" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.systemrequest" />
   </TABLE>

   <TABLE PREFIX="TProperty1" NAME="TProperty" SIMPLENAME="~TProperty Property" PARENT="TSystem1">
      <JOIN TYPE="inner">$parent.SystemK=$this.ParentK AND $this.table_number=1010</JOIN>
      <FIELD NAME="PropertyK" ALIAS="ID (Property)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.property" />
   </TABLE>

   <TABLE PREFIX="TPropertyName1" NAME="TPropertyName" SIMPLENAME="~TPropertyName Property name" PARENT="TProperty1">
      <JOIN TYPE="inner">$parent.PropertyNameK=$this.PropertyNameK</JOIN>
      <FIELD NAME="PropertyNameK" ALIAS="ID (Property name)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.propertyname" />
   </TABLE>

   <TABLE PREFIX="TTag1" NAME="TTag" SIMPLENAME="~TTag Hashtag" PARENT="TSystem1">
      <JOIN TYPE="inner">$parent.SystemK=$this.ParentK AND $this.table_number=1010</JOIN>
      <FIELD NAME="TagK" ALIAS="ID (Tag)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.tag" />
      <COPY PREFIX="TTag2" PARENT="TCustomer1" JOIN="$parent.CustomerK=$this.ParentK AND $this.table_number=1030" />
      <COPY PREFIX="TTag3" PARENT="TActivity2" JOIN="$parent.ActivityK=$this.ParentK AND $this.table_number=1110" />
      <COPY PREFIX="TTag4" PARENT="TArticle1" JOIN="$parent.ArticleK=$this.ParentK AND $this.table_number=1160" />
   </TABLE>

   <TABLE PREFIX="TTagName1" NAME="TTagName" SIMPLENAME="~TTagName Property name" PARENT="TTag1">
      <JOIN TYPE="inner">$parent.TagNameK=$this.TagNameK</JOIN>
      <FIELD NAME="TagNameK" ALIAS="ID (Tag name)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.tagname" />
   </TABLE>

   <TABLE PREFIX="TTodo1" NAME="TTodo" ALIAS="TTodo1" SIMPLENAME="~TTodo TTodo" PARENT="TTodoList1">
      <JOIN TYPE="inner">$parent.TodoListK=$this.TodoListK</JOIN>
      <FIELD NAME="TodoK" ALIAS="ID (Todo)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.todo" />
      <COPY PREFIX="TTodo2" PARENT="TTodoList2" />
      <COPY PREFIX="TTodo3" PARENT="TTodoList3" />
   </TABLE>
   
   <TABLE PREFIX="TTodoList1" NAME="TTodoList" ALIAS="TTodoList1" SIMPLENAME="~TTodoList TTodoList" PARENT="TSystem1">
      <JOIN TYPE="inner">$parent.SystemK=$this.ParentK AND $this.table_number=1010</JOIN>
      <FIELD NAME="TodoListK" ALIAS="ID (List)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.todolist" />
      <COPY PREFIX="TTodoList2" PARENT="TCustomer1" JOIN="$parent.CustomerK=$this.ParentK AND $this.table_number=1030" />
      <COPY PREFIX="TTodoList3" PARENT="TProject1" JOIN="$parent.CustomerK=$this.ParentK AND $this.table_number=1050" />
      <COPY PREFIX="TTodoList4" PARENT="TArticlePresentation1" JOIN="$parent.ArticlePresentationK=$this.ParentK AND $this.table_number=1230" />
   </TABLE>

   <TABLE PREFIX="VChangelog1" NAME="Changelog" SIMPLENAME="Changelog" PARENT="TSystemVersion1">
      <JOIN TYPE="inner">$parent.SystemVersionK=$this.SystemVersionK</JOIN>
      <DERIVED>(
SELECT CAST(x.rSystemVersionXActivityK AS BIGINT) * 10 KeyK, a.ParentK SystemK, x.ActivityK RecordK, a.TypeC, x.ImpactC, a.FDescription, (CASE WHEN a.FBeginD IS NULL THEN a.UpdateD ELSE a.FBeginD END) CreateD, v.FName, v.FBuild, v.FVersion1, v.FVersion2, v.FVersion3, v.FReleaseDate, v.FReleasedDate, x.SystemVersionK, v.OverallCounter, v.SystemCounter, x.TargetC,
(SELECT TOP 1 _n.FNote FROM application.TNote _n WHERE _n.RecordK=a.ActivityK AND _n.table_number=1110) AS "FNote"
FROM $O{APP}TActivity a JOIN $O{APP}TrSystemVersionXActivity x ON a.ActivityK=x.ActivityK JOIN $O{APP}TSystemVersion v ON x.SystemVersionK=v.SystemVersionK
WHERE a.table_number = 1010
UNION ALL
SELECT CAST(x.rSystemVersionXProjectK AS BIGINT) * 10 + 1, p.ParentK, x.ProjectK RecordK, p.TypeC, x.ImpactC, p.FName, (CASE WHEN p.FBeginD IS NULL THEN p.UpdateD ELSE p.FBeginD END), v.FName, v.FBuild, v.FVersion1, v.FVersion2, v.FVersion3, v.FReleaseDate, v.FReleasedDate, x.SystemVersionK, v.OverallCounter, v.SystemCounter, x.TargetC,
(SELECT TOP 1 _n.FNote FROM application.TNote _n WHERE _n.RecordK=p.ProjectK AND _n.table_number=1050) AS "FNote"
FROM $O{APP}TProject p JOIN $O{APP}TrSystemVersionXProject x ON p.ProjectK=x.ProjectK JOIN $O{APP}TSystemVersion v ON x.SystemVersionK=v.SystemVersionK
WHERE p.table_number = 1010
UNION ALL
SELECT CAST(l.SystemVersionK AS BIGINT) * 10 + 2, v.SystemK, l.LogK RecordK, l.TypeC, l.ImpactC, l.FDescription, l.CreateD, v.FName, v.FBuild, v.FVersion1, v.FVersion2, v.FVersion3, v.FReleaseDate, v.FReleasedDate, v.SystemVersionK, v.OverallCounter, v.SystemCounter, v.TargetC,
(SELECT TOP 1 _n.FNote FROM application.TNote _n WHERE _n.RecordK=l.LogK AND _n.table_number=1070) AS "FNote"
FROM $O{APP}TSystemVersion v JOIN $O{APP}TLog l ON v.SystemVersionK=l.SystemVersionK
      )</DERIVED>
      <FIELD NAME="KeyK" ALIAS="ID" TYPE="I4" CONDITION="1" KEY="1" />
      <FIELD NAME="SystemK" ALIAS="ID (System)" TYPE="I4" CONDITION="1" FKEY="TSystem1" />
      <FIELD NAME="RecordK" ALIAS="Record id" TYPE="INT" CONDITION="1" />
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="changelog.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK IN(60,120) ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="ImpactC" ALIAS="Impact" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="changelog.impact">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=122 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="CreateD" ALIAS="Create" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <FIELD NAME="FName" ALIAS="Name" TYPE="STR" CONDITION="1" DISPLAY="0" />
      <FIELD ID="VersionName" NAME="FName" ALIAS="Version" TYPE="STR" CONDITION="expression" DISPLAY="1">
         <EXPRESSION>CONCAT(FORMAT(ISNULL($T.FVersion1,0),'0#'),':', FORMAT(ISNULL($T.FVersion2,0),'0#'), ':', FORMAT(ISNULL($T.FVersion3,0),'00#'))</EXPRESSION>
      </FIELD>
      <FIELD ID="VersionNameAndSystem" NAME="FName" ALIAS="Version and system" TYPE="STR" CONDITION="expression">
         <EXPRESSION>CONCAT(FORMAT(ISNULL($T.FVersion1,0),'0#'),':', FORMAT(ISNULL($T.FVersion2,0),'0#'), ':', FORMAT(ISNULL($T.FVersion3,0),'00#'), ' ',(SELECT _s.FName FROM $OTSystem _s JOIN $OTSystemVersion _sv ON _s.SystemK=_sv.SystemK WHERE _sv.SystemVersionK=$T.SystemVersionK))</EXPRESSION>
      </FIELD>
      <FIELD ID="SystemName" NAME="FName" ALIAS="System name" TYPE="STR" CONDITION="expression">
         <EXPRESSION>(SELECT _s.FName FROM $OTSystem _s JOIN $OTSystemVersion _sv ON _s.SystemK=_sv.SystemK WHERE _sv.SystemVersionK=$T.SystemVersionK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="FVersion1" ALIAS="Major" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FVersion2" ALIAS="Minor" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FVersion3" ALIAS="Patch" TYPE="I4" CONDITION="1" />
      
      <FIELD NAME="OverallCounter" ALIAS="Overall Counter" TYPE="I4" CONDITION="1" />
      <FIELD NAME="SystemCounter" ALIAS="System counter" TYPE="I4" CONDITION="1" />
      
      <FIELD NAME="FBuild" ALIAS="Build" TYPE="I4" CONDITION="1" />
      <FIELD NAME="TargetC" ALIAS="Target" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="log.target">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=121 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FNote" ALIAS="Note" TYPE="STR" CONDITION="expression" />
      <CONDITION ID="Hashtag" NAME="RecordK" SIMPLENAME="Hashtag" TYPE="STR" NOVALUE="1" INTELLISENSE="hashtag_name">
         <EXPRESSION>
$T.$F $_operator (SELECT _r.ParentK FROM $OTBadge _b JOIN $OTrXBadge _r ON _b.BadgeK = _r.BadgeK WHERE _b.FName $_condition AND _r.table_number IN(1050,1110,1070) )
         </EXPRESSION>
         <OPERATORS>
            <OPERATOR FROM="0" TO="11" />
            <OPERATOR FROM="5" TO="12" />
         </OPERATORS>
      </CONDITION>
   </TABLE>

   <TABLE PREFIX="TArticle1" NAME="TArticle" SIMPLENAME="~TArticle TArticle" PARENT="TSystem1">
      <JOIN TYPE="inner">$parent.SystemK=$this.ParentK AND $this.table_number=1010</JOIN>
      <FIELD NAME="ArticleK" ALIAS="ID (Article)" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.article" />
      <COPY PREFIX="TArticle2" PARENT="TrArticleBookXArticle1" JOIN="$parent.ArticleK=$this.ArticleK" />
      <COPY PREFIX="TArticle3" PARENT="TrArticlePresentationXArticle1" JOIN="$parent.ArticleK=$this.ArticleK" />
   </TABLE>
   
   <TABLE PREFIX="TImage1" NAME="TImage" SIMPLENAME="~TImage Image" PARENT="TArticle2">
      <JOIN TYPE="inner">$parent.ArticleK=$this.ParentK AND $this.table_number=1160</JOIN>
      <FIELD NAME="ImageK" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.imnage" />
   </TABLE>
   

   <TABLE PREFIX="TArticleBook1" NAME="TArticleBook" ALIAS="TArticleBook1" SIMPLENAME="~TArticleBook Book" PARENT="TSystem1">
      <JOIN TYPE="inner">$parent.SystemK=$this.ParentK AND $this.table_number=1010</JOIN>
      <FIELD NAME="ArticleBookK" ALIAS="ID (Book)" TYPE="I4" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.articlebook" />
   </TABLE>
   
   <TABLE PREFIX="TArticleChapter1" NAME="TArticleChapter" SIMPLENAME="~TArticleChapter Chapter" PARENT="TArticleBook1">
      <JOIN TYPE="inner">$parent.ArticleBookK=$this.ArticleBookK</JOIN>
      <FIELD NAME="ArticleChapterK" ALIAS="ID (Chapter)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.articlechapter" />
   </TABLE>
   
   
   <TABLE PREFIX="TrSystemIntentXActivity1" NAME="TrSystemIntentXActivity" SIMPLENAME="~TrSystemIntentXActivity Intent - Activity" PARENT="TSystemIntent1" SHOW="0">
      <JOIN TYPE="inner">$parent.SystemIntentK=$this.SystemIntentK</JOIN>
   </TABLE>

   <TABLE PREFIX="TrSystemIntentXTodoList1" NAME="TrSystemIntentXTodoList" SIMPLENAME="~TrSystemIntentXTodoList Intent - Todo" PARENT="TSystemIntent1" SHOW="0">
      <JOIN TYPE="inner">$parent.SystemIntentK=$this.SystemIntentK</JOIN>
   </TABLE>


   <TABLE PREFIX="TrSystemRequestXActivity1" NAME="TrSystemRequestXActivity" SIMPLENAME="~TrSystemRequestXActivity Request - Activity" PARENT="TSystemRequest1" SHOW="0">
      <JOIN TYPE="inner">$parent.SystemRequestK=$this.SystemRequestK</JOIN>
   </TABLE>

   <TABLE PREFIX="TrSystemVersionXActivity1" NAME="TrSystemVersionXActivity" SIMPLENAME="~TrSystemVersionXActivity Version - Activity" PARENT="TSystemVersion1" TYPE="R">
      <JOIN TYPE="inner">$parent.SystemVersionK=$this.SystemVersionK</JOIN>
      <FIELD NAME="SystemVersionK" ALIAS="ID (Version-Activity)" TYPE="INT" CONDITION="1" KEY="1" />
   </TABLE>
   
   <TABLE PREFIX="TrActivityXTodoList1" NAME="TrActivityXTodoList" SIMPLENAME="~TrActivityXTodoList Activity - Todo list" PARENT="TActivity2">
      <JOIN TYPE="inner">$parent.ActivityK=$this.ActivityK</JOIN>
      <FIELD NAME="rActivityXTodoListK" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
      <FIELD NAME="ActivityK" ALIAS="Activity" DISPLAYTYPE="STR" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT LEFT( _a.FDescription, 50 ) FROM $OTActivity _a WHERE _a.ActivityK=$T.ActivityK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="TodoListK" ALIAS="TodoList" DISPLAYTYPE="STR" TYPE="INT" CONDITION="expression" DISPLAY="0">
         <EXPRESSION>(SELECT LEFT( _tl.FName, 50 ) FROM $OTTodoList _tl WHERE _tl.TodoListK=$T.TodoListK)</EXPRESSION>
      </FIELD>
      <EDIT NAME="ActivityK" ALIAS="Activity" TYPE="INT" />
      <EDIT NAME="TodoListK" ALIAS="TodoList" TYPE="INT" />
      <COPY PREFIX="TrActivityXTodoList2" PARENT="TTodoList1" JOIN="$parent.TodoListK=$this.TodoListK" />
   </TABLE>
   

   <TABLE PREFIX="TrArticleXActivity1" NAME="TrArticleXActivity" SIMPLENAME="~TrArticleXActivity Article - Activity" PARENT="TArticle1" TYPE="R">
      <JOIN TYPE="inner">$parent.ArticleK=$this.ArticleK</JOIN>
      <FIELD NAME="rArticleXActivityK" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
      <COPY PREFIX="TrArticleXActivity2" PARENT="TArticle2" />
   </TABLE>

   <TABLE PREFIX="TrArticleBookXActivity1" NAME="TrArticleBookXActivity" SIMPLENAME="~TrArticleBookXActivity Book - Activity" PARENT="TArticleBook1" TYPE="R">
      <JOIN TYPE="inner">$parent.ArticleBookK=$this.ArticleBookK</JOIN>
      <FIELD NAME="rArticleXActivityK" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
   </TABLE>

   <TABLE PREFIX="TrProjectXActivity1" NAME="TrProjectXActivity" SIMPLENAME="~TrProjectXActivity Project - Activity" PARENT="TProject1" SHOW="0" TYPE="R">
      <JOIN TYPE="inner">$parent.ProjectK=$this.ProjectK</JOIN>
      <FIELD NAME="rProjectXActivityK" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
      <FIELD NAME="ProjectK" ALIAS="Project" DISPLAYTYPE="STR" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT LEFT( _p.FName, 50 ) FROM $OTProject _p WHERE _p.ProjectK=$T.ProjectK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="ActivityK" ALIAS="Activity" DISPLAYTYPE="STR" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT LEFT( _a.FDescription, 50 ) FROM $OTActivity _a WHERE _a.ActivityK=$T.ActivityK)</EXPRESSION>
      </FIELD>
      <EDIT NAME="ProjectK" ALIAS="Project" TYPE="INT" />
      <EDIT NAME="ActivityK" ALIAS="Activity" TYPE="INT" />
   </TABLE>
   
   <TABLE PREFIX="TrProjectPhaseXActivity1" NAME="TrProjectPhaseXActivity" SIMPLENAME="~TrProjectPhaseXActivity Phase - Activity" PARENT="TProjectPhase1" TYPE="R">
      <JOIN TYPE="inner">$parent.ProjectPhaseK=$this.ProjectPhaseK</JOIN>
      <FIELD NAME="rProjectPhaseXActivityK" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
      <FIELD NAME="ProjectPhaseK" ALIAS="Phase" DISPLAYTYPE="STR" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT _pp.FName FROM $OTProjectPhase _pp WHERE _pp.ProjectPhaseK=$T.ProjectPhaseK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="ActivityK" ALIAS="Activity" DISPLAYTYPE="STR" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT LEFT( _a.FDescription, 50 ) FROM $OTActivity _a WHERE _a.ActivityK=$T.ActivityK)</EXPRESSION>
      </FIELD>
      <EDIT NAME="ProjectPhaseK" ALIAS="Phase" TYPE="INT" />
      <EDIT NAME="ActivityK" ALIAS="Activity" TYPE="INT" />
   </TABLE>

   <TABLE PREFIX="TrProjectPhaseXTodoList1" NAME="TrProjectPhaseXTodoList" SIMPLENAME="~TrProjectPhaseXActivity Phase - Todolist" PARENT="TProjectPhase1" TYPE="R">
      <JOIN TYPE="inner">$parent.ProjectPhaseK=$this.ProjectPhaseK</JOIN>
      <FIELD NAME="rProjectPhaseXTodoListK" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
      <FIELD NAME="ProjectPhaseK" ALIAS="Phase" DISPLAYTYPE="STR" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT _pp.FName FROM $OTProjectPhase _pp WHERE _pp.ProjectPhaseK=$T.ProjectPhaseK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="TodoListK" ALIAS="TodoList" DISPLAYTYPE="STR" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT LEFT( _tl.FName, 50 ) FROM $OTTodoList _tl WHERE _tl.TodoListK=$T.TodoListK)</EXPRESSION>
      </FIELD>
      <EDIT NAME="ProjectPhaseK" ALIAS="Phase" TYPE="INT" />
      <EDIT NAME="TodoListK" ALIAS="TodoList" TYPE="INT" />
   </TABLE>

   <TABLE PREFIX="TrArticleBookXArticle1" NAME="TrArticleBookXArticle" SIMPLENAME="~TrArticleBookXArticle Book - Article" PARENT="TArticleBook1" TYPE="R">
      <JOIN TYPE="inner">$parent.ArticleBookK=$this.ArticleBookK</JOIN>
      <FIELD NAME="rArticleBookXArticle" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
   </TABLE>
   
   <TABLE PREFIX="TArticlePresentation1" NAME="TArticlePresentation" SIMPLENAME="~TArticlePresentation Presentation" PARENT="TSystem1" DESCRIPTION="Create presentations connecting articles with relation table called slide to presentation">
      <JOIN TYPE="inner">$parent.SystemK=$this.ParentK AND $this.table_number=1010</JOIN>
      <FIELD NAME="ArticlePresentationK" ALIAS="ID (Presentation)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.articlepresentation" />
      <COPY PREFIX="TArticlePresentation2" PARENT="TCustomer1" JOIN="$parent.CustomerK=$this.ParentK AND $this.table_number=1030" />
   </TABLE>
   
   <TABLE PREFIX="TrArticlePresentationXArticle1" NAME="TrArticlePresentationXArticle" SIMPLENAME="~TrArticlePresentationXArticle Slide" PARENT="TArticlePresentation1" DESCRIPTION="Connect articles to presentation, using this table you can connect any article to selected presentation" TYPE="R">
      <JOIN TYPE="inner">[$parent].[ArticlePresentationK]=[$this].[ArticlePresentationK]</JOIN>
      <FIELD NAME="rArticlePresentationXArticleK" ALIAS="ID (Slide)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.articlepresentationxarticle" />
      <COPY PREFIX="TrArticlePresentationXArticle2" PARENT="TArticlePresentation2" />
   </TABLE>
   
   <TABLE PREFIX="TrArticleBookXArticleBookList1" NAME="TrArticleBookXArticleBookList" ALIAS="TrArticleBookXArticleBookList1" SIMPLENAME="~TrArticleBookXArticleBookList TrArticleBookXArticleBookList" PARENT="TArticleBook1" TYPE="R">
      <JOIN TYPE="inner">$parent.ArticleBookK=$this.ArticleBookK</JOIN>
      <FIELD NAME="rArticleBookXArticleBookListK" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
      <FIELD NAME="ArticleBookK" ALIAS="ArticleBookK" DISPLAYTYPE="STR" TYPE="INT" CONDITION="1">
         <EXPRESSION>(SELECT LEFT( ISNULL(_ab.FHeader, _ab.FName), 50 ) FROM $OTArticleBook _ab WHERE _ab.ArticleBookK=$T.ArticleBookK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="ArticleBookListK" ALIAS="ArticleBookListK" TYPE="I4" CONDITION="1" />
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="articlebookxarticlebooklist.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=1080 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FPage" ALIAS="Page" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FOrder" ALIAS="Order" TYPE="I4" CONDITION="1" />
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FHelp" ALIAS="Help" TYPE="STR" CONDITION="1" />
      
      <FIELD ID="TypeC-ArticleBook" NAME="TypeC" ALIAS="Book Type" TYPE="I4" CONDITION="1" DESCRIPTION="Type of connected book">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c JOIN $OTArticleBook _ab ON _c.CodeK=_ab.TypeC WHERE _ab.ArticleBookK=$T.ArticleBookK)</EXPRESSION>
         <LOOKUP CACHE="articlebook.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=150 ORDER BY 2</LOOKUP>
      </FIELD>

      <FIELD ID="BookName" NAME="ArticleBookK" ALIAS="Book name" TYPE="I4" CONDITION="expression">
         <EXPRESSION>(SELECT _ab.FName FROM $OTArticleBook _ab WHERE _ab.ArticleBookK=$T.ArticleBookK)</EXPRESSION>
      </FIELD>

      <EDIT NAME="ArticleBookK" ALIAS="ArticleBookK" TYPE="I4" NULL="0" />
      <EDIT NAME="ArticleBookListK" ALIAS="ArticleBookListK" TYPE="I4" NULL="0" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="articlebookxarticlebooklist.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=1080 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FPage" ALIAS="Page" TYPE="I4" />
      <EDIT NAME="FOrder" ALIAS="Order" TYPE="I4" />
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FHelp" ALIAS="Help" TYPE="STR" MAX="1000" />
   </TABLE>   

   <TABLE PREFIX="TArticleBookList1" NAME="TArticleBookList" SIMPLENAME="~TArticleBookList Article book list" PARENT="TSystem1">
      <JOIN TYPE="inner">$parent.SystemK=$this.ParentK AND $this.table_number=1010</JOIN>
      <FIELD NAME="ArticleBookListK" ALIAS="ID (Book list)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.articlebooklist" />
      <COPY PREFIX="TArticleBookList2" PARENT="TrArticleBookXArticleBookList1" JOIN="$parent.ArticleBookListK=$this.ArticleBookListK" />
   </TABLE>
   
   
   <TABLE PREFIX="TrSaleXActivity1" NAME="TrSaleXActivity" SIMPLENAME="~TrSaleXActivity Sales - Activity" PARENT="TSale1" TYPE="R">
      <JOIN TYPE="inner">$parent.SaleK=$this.SaleK</JOIN>
      <FIELD NAME="rSaleXActivityK" ALIAS="ID (Sales - Activity)" TYPE="INT" CONDITION="1" KEY="1" />
      <FIELD NAME="SaleK" ALIAS="Sale" TYPE="INT" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT s.FName FROM $OTSale s WHERE s.SaleK=$T.SaleK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="ActivityK" ALIAS="Activity" DISPLAYTYPE="STR" TYPE="INT" CONDITION="expression">
         <EXPRESSION>(SELECT LEFT( _a.FDescription, 50 ) FROM $OTActivity _a WHERE _a.ActivityK=$T.ActivityK)</EXPRESSION>
      </FIELD>
      <EDIT NAME="SaleK" ALIAS="Sale" TYPE="INT" />
      <EDIT NAME="ActivityK" ALIAS="Activity" TYPE="INT" />
   </TABLE>
   
   <TABLE PREFIX="TrSaleXCustomerContact1" NAME="TrSaleXCustomerContact" SIMPLENAME="~TrSaleXCustomerContact Sale - Contact" PARENT="TSale1" TYPE="R">
      <JOIN TYPE="inner">$parent.SaleK=$this.SaleK</JOIN>
      <FIELD NAME="rSaleXCustomerContactK" ALIAS="ID (Contact)" TYPE="INT" CONDITION="1" KEY="1" />
      <FIELD NAME="CustomerContactK" ALIAS="Contact" TYPE="INT" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT CASE WHEN _c.FName IS NOT NULL THEN _c.FName ELSE _c.FFirstName + ' ' + ISNULL(_c.FLastName,'') END FROM $OTCustomerContact _c WHERE _c.CustomerContactK=$T.CustomerContactK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="CreateD" ALIAS="~CreateD Create" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="CreateD" SIMPLENAME="~CreateD Create" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="UpdateD" ALIAS="~UpdateD Update" TYPE="ODATE">
         <FORMULA CODE="GD1">date.datetimetext( float(@this) + 2 )</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="UpdateD" SIMPLENAME="~UpdateD Update" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="RoleC" ALIAS="Role" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="salexcustomercontact.role">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=1070 ORDER BY 2</LOOKUP>
      </FIELD>
      <EDIT NAME="CustomerContactK" ALIAS="Contact" TYPE="INT" />
      <EDIT NAME="RoleC" ALIAS="Role" TYPE="INT">
         <LOOKUP CACHE="salexcustomercontact.role.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=1070 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
   </TABLE>
   
   <TABLE PREFIX="TrSaleXTodolist1" NAME="TrSaleXTodolist" SIMPLENAME="~TrSaleXTodolist Sales - Todo list" PARENT="TSale1" TYPE="R">
      <JOIN TYPE="inner">$parent.SaleK=$this.SaleK</JOIN>
      <FIELD NAME="rSaleXTodolistK" ALIAS="ID (Sale - Todo list)" TYPE="INT" CONDITION="1" KEY="1" />
      <FIELD NAME="SaleK" ALIAS="Sale" TYPE="INT" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT s.FName FROM $OTSale s WHERE s.SaleK=$T.SaleK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="TodoListK" ALIAS="List" TYPE="INT" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT tl.FName FROM $OTTodoList tl WHERE tl.TodoListK=$T.TodoListK)</EXPRESSION>
      </FIELD>
      <EDIT NAME="SaleK" ALIAS="Sale" TYPE="INT" />
      <EDIT NAME="TodoListK" ALIAS="List" TYPE="INT" />
   </TABLE>

   <TABLE PREFIX="TrSystemXCustomer1" NAME="TrSystemXCustomer" SIMPLENAME="~TrSystemXCustomer System - Customer" PARENT="TSystem1" TYPE="R">
      <JOIN TYPE="inner">$parent.SystemK=$this.SystemK</JOIN>
      <FIELD NAME="rSystemXCustomerK" ALIAS="ID (System - Customer)" TYPE="I4" CONDITION="1" KEY="1" />
      <FIELD NAME="SystemK" ALIAS="System" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1" />
      <FIELD NAME="CustomerK" ALIAS="Customer" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT FName FROM $OTCustomer c WHERE c.CustomerK=$T.CustomerK)</EXPRESSION>
      </FIELD>
      <FIELD NAME="TypeC" ALIAS="Type" TYPE="I4" DISPLAYTYPE="STR" CONDITION="1">
         <EXPRESSION>(SELECT _c.FName FROM $O{CODE}TCode _c WHERE _c.CodeK=$T.$F)</EXPRESSION>
         <LOOKUP CACHE="systemxcustomer.type">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=1010 ORDER BY 2</LOOKUP>
      </FIELD>
      <FIELD NAME="FDescription" ALIAS="Description" TYPE="STR" CONDITION="1" />
      <FIELD NAME="FBeginD" ALIAS="Begin" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FBeginD" SIMPLENAME="~TActivityFBeginD Begin" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <FIELD NAME="FEndD" ALIAS="End" TYPE="ODATE">
         <FORMULA CODE="GD1">iif(is_true(@this);date.datetimetext(@this + 2);'')</FORMULA>
         <EXPRESSION>CAST( $T.$F AS float )</EXPRESSION>
         <EXPRESSION OUTPUT="outside">$T.$F</EXPRESSION>
      </FIELD>
      <CONDITION NAME="FEndD" SIMPLENAME="~TActivityFEndD End" TYPE="ODATE" DEFAULT="$${date.datetimetext( date.offsethour( 0 ) )}">
         <EXPRESSION>FLOOR( CAST($T.$F AS FLOAT) ) $_operator FLOOR($_value-2)</EXPRESSION>
      </CONDITION>
      <EDIT NAME="SystemK" ALIAS="System" TYPE="I4" />
      <EDIT NAME="CustomerK" ALIAS="Customer" TYPE="I4" INTELLISENSE="customer_name_key" />
      <EDIT NAME="TypeC" ALIAS="Type" TYPE="I4">
         <LOOKUP CACHE="systemxcustomer.type.edit">SELECT CodeK, FName FROM $O{CODE}TCode WHERE GroupK=1010 AND FDeleted=0 AND FIdle=0 ORDER BY 2</LOOKUP>
      </EDIT>
      <EDIT NAME="FDescription" ALIAS="Description" TYPE="STR" MAX="1000" />
      <EDIT NAME="FBeginD" ALIAS="Begin" TYPE="DATE" />
      <EDIT NAME="FEndD" ALIAS="End" TYPE="DATE" />
   </TABLE>


   <TABLE PREFIX="TActivity1" NAME="TActivity" SIMPLENAME="~TActivity Activity" PARENT="TrSystemRequestXActivity1" DESCRIPTION="Activities is used to describe tasks and happenings. What you are doing.">
      <JOIN TYPE="inner">$parent.ActivityK=$this.ActivityK</JOIN>
      <FIELD NAME="ActivityK" ALIAS="ID (Activity)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.activity" />
      <COPY PREFIX="TActivity2" PARENT="TSystem1" JOIN="$parent.SystemK=$this.ParentK AND $this.table_number=1010" />
      <!-- <COPY PREFIX="TActivity3" PARENT="TProject1" JOIN="$parent.ProjectK=$this.ParentK AND $this.table_number=1050" /> -->
      <COPY PREFIX="TActivity4" PARENT="TrProjectXActivity1" />
      <COPY PREFIX="TActivity5" PARENT="TrSystemVersionXActivity1" />
      <COPY PREFIX="TActivity6" PARENT="TCustomer1" JOIN="$parent.CustomerK=$this.ParentK AND $this.table_number=1030" />
      <COPY PREFIX="TActivity7" PARENT="TSale1" JOIN="$parent.CustomerK=$this.ParentK AND $this.table_number=1060" />
      <COPY PREFIX="TActivity8" PARENT="TrArticleXActivity1" />
      <COPY PREFIX="TActivity9" PARENT="TrArticleXActivity2" />
      <COPY PREFIX="TActivity10" PARENT="TrArticleBookXActivity1" />
      <COPY PREFIX="TActivity11" PARENT="TrSaleXActivity1" />
   </TABLE>
   
   <TABLE PREFIX="TBundle1" NAME="TBundle" SIMPLENAME="~TBundle Bundle" PARENT="TSystem1">
      <JOIN TYPE="inner">$parent.SystemK=$this.RecordK AND $this.table_number=1010</JOIN>
      <FIELD NAME="BundleK" ALIAS="ID (Bundle)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.bundle" />
   </TABLE>
   
   <TABLE PREFIX="TrXBadge1" NAME="TrXBadge" SIMPLENAME="~TrXBadge System - Hashtag" PARENT="TSystem1" TYPE="R">
      <JOIN TYPE="inner">$parent.SystemK=$this.ParentK AND $this.table_number=1010</JOIN>
      <FIELD NAME="rXBadgeK" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
      <COPY PREFIX="TrXBadge2" PARENT="TArticle2" JOIN="$parent.ArticleK=$this.ParentK AND $this.table_number=1160"/>
      <COPY PREFIX="TrXBadge3" PARENT="TActivity2" JOIN="$parent.ArticleK=$this.ParentK AND $this.table_number=1110"/>
      <COPY PREFIX="TrXBadge4" PARENT="TActivity6" JOIN="$parent.ArticleK=$this.ParentK AND $this.table_number=1110"/>
   </TABLE>
   
   <TABLE PREFIX="TBadge1" NAME="TBadge" SIMPLENAME="~TBadge Hashtag" PARENT="TrXBadge1">
      <JOIN TYPE="inner">$parent.BadgeK=$this.BadgeK</JOIN>
      <FIELD NAME="BadgeK" ALIAS="ID" TYPE="INT" CONDITION="1" KEY="1" />
      <COPY PREFIX="TBadge2" PARENT="TrXBadge2" />
      <COPY PREFIX="TBadge3" PARENT="TrXBadge3" />
      <COPY PREFIX="TBadge4" PARENT="TrXBadge4" />
      <USETABLETEMPLATE ID="application.badge" />
   </TABLE>

   <TABLE PREFIX="TActivityRemark1" NAME="TActivityRemark" ALIAS="TActivityRemark1" SIMPLENAME="~TActivityRemark Activity remark" PARENT="TActivity1">
      <JOIN TYPE="inner">$parent.ActivityK=$this.ActivityK</JOIN>
      <FIELD NAME="ActivityRemarkK" ALIAS="ID (Remark)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.activityremark" />
      <COPY PREFIX="TActivityRemark2" PARENT="TActivity2" />
   </TABLE>

   <TABLE PREFIX="TNote1" NAME="TNote" ALIAS="TNote1" SIMPLENAME="~TNote TNote" PARENT="TSystem1">
      <JOIN TYPE="inner">$parent.SystemK=$this.RecordK AND $this.table_number=1010</JOIN>
      <FIELD NAME="NoteK" ALIAS="ID (Note)" TYPE="INT" CONDITION="1" KEY="1" />
      <USETABLETEMPLATE ID="application.note" />
   </TABLE>
   


   
</SELECTION>